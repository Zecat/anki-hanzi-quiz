<head><script>/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();function r(t,e,r,i){var o,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,i);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(s<3?o(a):s>3?o(e,r,a):o(e,r))||a);return s>3&&a&&Object.defineProperty(e,r,a),a}function i(t,e,r,i){return new(r||(r=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function l(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,l)}c((i=i.apply(t,e||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;const o=t=>(e,r)=>{void 0!==r?r.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)},s=globalThis,a=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,l=Symbol(),c=new WeakMap;class n{constructor(t,e,r){if(this._$cssResult$=!0,r!==l)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(a&&void 0===t){const r=void 0!==e&&1===e.length;r&&(t=c.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&c.set(e,t))}return t}toString(){return this.cssText}}const h=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,r,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[i+1]),t[0]);return new n(r,t,l)},d=a?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return(t=>new n("string"==typeof t?t:t+"",void 0,l))(e)})(t):t,{is:u,defineProperty:p,getOwnPropertyDescriptor:m,getOwnPropertyNames:f,getOwnPropertySymbols:v,getPrototypeOf:g}=Object,y=globalThis,_=y.trustedTypes,x=_?_.emptyScript:"",w=y.reactiveElementPolyfillSupport,C=(t,e)=>t,z={toAttribute(t,e){switch(e){case Boolean:t=t?x:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},S=(t,e)=>!u(t,e),$={attribute:!0,type:String,converter:z,reflect:!1,hasChanged:S};Symbol.metadata??=Symbol("metadata"),y.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=$){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(t,r,e);void 0!==i&&p(this.prototype,t,i)}}static getPropertyDescriptor(t,e,r){const{get:i,set:o}=m(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return i?.call(this)},set(e){const s=i?.call(this);o.call(this,e),this.requestUpdate(t,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??$}static _$Ei(){if(this.hasOwnProperty(C("elementProperties")))return;const t=g(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(C("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(C("properties"))){const t=this.properties,e=[...f(t),...v(t)];for(const r of e)this.createProperty(r,t[r])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,r]of e)this.elementProperties.set(t,r)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const r=this._$Eu(t,e);void 0!==r&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(d(t))}else void 0!==t&&e.push(d(t));return e}static _$Eu(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const r of e.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(a)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const r of e){const e=document.createElement("style"),i=s.litNonce;void 0!==i&&e.setAttribute("nonce",i),e.textContent=r.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EC(t,e){const r=this.constructor.elementProperties.get(t),i=this.constructor._$Eu(t,r);if(void 0!==i&&!0===r.reflect){const o=(void 0!==r.converter?.toAttribute?r.converter:z).toAttribute(e,r.type);this._$Em=t,null==o?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(t,e){const r=this.constructor,i=r._$Eh.get(t);if(void 0!==i&&this._$Em!==i){const t=r.getPropertyOptions(i),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:z;this._$Em=i,this[i]=o.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,r){if(void 0!==t){if(r??=this.constructor.getPropertyOptions(t),!(r.hasChanged??S)(this[t],e))return;this.P(t,e,r)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,r){this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,r]of t)!0!==r.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],r)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:"open"},b[C("elementProperties")]=new Map,b[C("finalized")]=new Map,w?.({ReactiveElement:b}),(y.reactiveElementVersions??=[]).push("2.0.4");const A={attribute:!0,type:String,converter:z,reflect:!1,hasChanged:S},E=(t=A,e,r)=>{const{kind:i,metadata:o}=r;let s=globalThis.litPropertyMetadata.get(o);if(void 0===s&&globalThis.litPropertyMetadata.set(o,s=new Map),s.set(r.name,t),"accessor"===i){const{name:i}=r;return{set(r){const o=e.get.call(this);e.set.call(this,r),this.requestUpdate(i,o,t)},init(e){return void 0!==e&&this.P(i,void 0,t),e}}}if("setter"===i){const{name:i}=r;return function(r){const o=this[i];e.call(this,r),this.requestUpdate(i,o,t)}}throw Error("Unsupported decorator location: "+i)};function T(t){return(e,r)=>"object"==typeof r?E(t,e,r):((t,e,r)=>{const i=e.hasOwnProperty(r);return e.constructor.createProperty(r,i?{...t,wrapped:!0}:t),i?Object.getOwnPropertyDescriptor(e,r):void 0})(t,e,r)}function P(t){return T({...t,state:!0,attribute:!1})}const O=(t,e,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&"object"!=typeof e&&Object.defineProperty(t,e,r),r);function D(t,e){return(r,i,o)=>{const s=e=>e.renderRoot?.querySelector(t)??null;if(e){const{get:t,set:e}="object"==typeof i?r:o??(()=>{const t=Symbol();return{get(){return this[t]},set(e){this[t]=e}}})();return O(r,i,{get(){let r=t.call(this);return void 0===r&&(r=s(this),(null!==r||this.hasUpdated)&&e.call(this,r)),r}})}return O(r,i,{get(){return s(this)}})}}function B(t){return(e,r)=>{const{slot:i,selector:o}=t??{},s="slot"+(i?`[name=${i}]`:":not([name])");return O(e,r,{get(){const e=this.renderRoot?.querySelector(s),r=e?.assignedElements(t)??[];return void 0===o?r:r.filter((t=>t.matches(o)))}})}}const N=globalThis,q=N.trustedTypes,F=q?q.createPolicy("lit-html",{createHTML:t=>t}):void 0,W="$lit$",U=`lit$${(Math.random()+"").slice(9)}$`,j="?"+U,G=`<${j}>`,Q=document,Z=()=>Q.createComment(""),K=t=>null===t||"object"!=typeof t&&"function"!=typeof t,X=Array.isArray,Y=t=>X(t)||"function"==typeof t?.[Symbol.iterator],J="[ \t\n\f\r]",tt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,et=/-->/g,rt=/>/g,it=RegExp(`>|${J}(?:([^\\s"'>=/]+)(${J}*=${J}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),ot=/'/g,nt=/"/g,st=/^(?:script|style|textarea|title)$/i,at=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),lt=at(1),ct=at(2),ht=Symbol.for("lit-noChange"),dt=Symbol.for("lit-nothing"),ut=new WeakMap,pt=Q.createTreeWalker(Q,129);function mt(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==F?F.createHTML(e):e}const ft=(t,e)=>{const r=t.length-1,i=[];let o,s=2===e?"<svg>":"",a=tt;for(let e=0;e<r;e++){const r=t[e];let l,c,h=-1,d=0;for(;d<r.length&&(a.lastIndex=d,c=a.exec(r),null!==c);)d=a.lastIndex,a===tt?"!--"===c[1]?a=et:void 0!==c[1]?a=rt:void 0!==c[2]?(st.test(c[2])&&(o=RegExp("</"+c[2],"g")),a=it):void 0!==c[3]&&(a=it):a===it?">"===c[0]?(a=o??tt,h=-1):void 0===c[1]?h=-2:(h=a.lastIndex-c[2].length,l=c[1],a=void 0===c[3]?it:'"'===c[3]?nt:ot):a===nt||a===ot?a=it:a===et||a===rt?a=tt:(a=it,o=void 0);const u=a===it&&t[e+1].startsWith("/>")?" ":"";s+=a===tt?r+G:h>=0?(i.push(l),r.slice(0,h)+W+r.slice(h)+U+u):r+U+(-2===h?e:u)}return[mt(t,s+(t[r]||"<?>")+(2===e?"</svg>":"")),i]};class V{constructor({strings:t,_$litType$:e},r){let i;this.parts=[];let o=0,s=0;const a=t.length-1,l=this.parts,[c,h]=ft(t,e);if(this.el=V.createElement(c,r),pt.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=pt.nextNode())&&l.length<a;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(W)){const e=h[s++],r=i.getAttribute(t).split(U),a=/([.?@])?(.*)/.exec(e);l.push({type:1,index:o,name:a[2],strings:r,ctor:"."===a[1]?k:"?"===a[1]?H:"@"===a[1]?I:R}),i.removeAttribute(t)}else t.startsWith(U)&&(l.push({type:6,index:o}),i.removeAttribute(t));if(st.test(i.tagName)){const t=i.textContent.split(U),e=t.length-1;if(e>0){i.textContent=q?q.emptyScript:"";for(let r=0;r<e;r++)i.append(t[r],Z()),pt.nextNode(),l.push({type:2,index:++o});i.append(t[e],Z())}}}else if(8===i.nodeType)if(i.data===j)l.push({type:2,index:o});else{let t=-1;for(;-1!==(t=i.data.indexOf(U,t+1));)l.push({type:7,index:o}),t+=U.length-1}o++}}static createElement(t,e){const r=Q.createElement("template");return r.innerHTML=t,r}}function vt(t,e,r=t,i){if(e===ht)return e;let o=void 0!==i?r._$Co?.[i]:r._$Cl;const s=K(e)?void 0:e._$litDirective$;return o?.constructor!==s&&(o?._$AO?.(!1),void 0===s?o=void 0:(o=new s(t),o._$AT(t,r,i)),void 0!==i?(r._$Co??=[])[i]=o:r._$Cl=o),void 0!==o&&(e=vt(t,o._$AS(t,e.values),o,i)),e}class lit_html_S{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:r}=this._$AD,i=(t?.creationScope??Q).importNode(e,!0);pt.currentNode=i;let o=pt.nextNode(),s=0,a=0,l=r[0];for(;void 0!==l;){if(s===l.index){let e;2===l.type?e=new M(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new L(o,this,t)),this._$AV.push(e),l=r[++a]}s!==l?.index&&(o=pt.nextNode(),s++)}return pt.currentNode=Q,i}p(t){let e=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class M{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,r,i){this.type=2,this._$AH=dt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=vt(this,t,e),K(t)?t===dt||null==t||""===t?(this._$AH!==dt&&this._$AR(),this._$AH=dt):t!==this._$AH&&t!==ht&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):Y(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==dt&&K(this._$AH)?this._$AA.nextSibling.data=t:this.T(Q.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:r}=t,i="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=V.createElement(mt(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(e);else{const t=new lit_html_S(i,this),r=t.u(this.options);t.p(e),this.T(r),this._$AH=t}}_$AC(t){let e=ut.get(t.strings);return void 0===e&&ut.set(t.strings,e=new V(t)),e}k(t){X(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,i=0;for(const o of t)i===e.length?e.push(r=new M(this.S(Z()),this.S(Z()),this,this.options)):r=e[i],r._$AI(o),i++;i<e.length&&(this._$AR(r&&r._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class R{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,r,i,o){this.type=1,this._$AH=dt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=o,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=dt}_$AI(t,e=this,r,i){const o=this.strings;let s=!1;if(void 0===o)t=vt(this,t,e,0),s=!K(t)||t!==this._$AH&&t!==ht,s&&(this._$AH=t);else{const i=t;let a,l;for(t=o[0],a=0;a<o.length-1;a++)l=vt(this,i[r+a],e,a),l===ht&&(l=this._$AH[a]),s||=!K(l)||l!==this._$AH[a],l===dt?t=dt:t!==dt&&(t+=(l??"")+o[a+1]),this._$AH[a]=l}s&&!i&&this.j(t)}j(t){t===dt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class k extends R{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===dt?void 0:t}}class H extends R{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==dt)}}class I extends R{constructor(t,e,r,i,o){super(t,e,r,i,o),this.type=5}_$AI(t,e=this){if((t=vt(this,t,e,0)??dt)===ht)return;const r=this._$AH,i=t===dt&&r!==dt||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==dt&&(r===dt||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){vt(this,t)}}const gt=N.litHtmlPolyfillSupport;gt?.(V,M),(N.litHtmlVersions??=[]).push("3.1.2");class lit_element_s extends b{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,r)=>{const i=r?.renderBefore??e;let o=i._$litPart$;if(void 0===o){const t=r?.renderBefore??null;i._$litPart$=o=new M(e.insertBefore(Z(),t),t,void 0,r??{})}return o._$AI(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return ht}}lit_element_s._$litElement$=!0,lit_element_s.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:lit_element_s});const yt=globalThis.litElementPolyfillSupport;yt?.({LitElement:lit_element_s});(globalThis.litElementVersions??=[]).push("4.0.4");const bt=Symbol("attachableController");let _t;_t=new MutationObserver((t=>{for(const e of t)e.target[bt]?.hostConnected()}));class AttachableController{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(t){null===t?this.host.removeAttribute("for"):this.host.setAttribute("for",t)}get control(){return this.host.hasAttribute("for")?this.htmlFor&&this.host.isConnected?this.host.getRootNode().querySelector(`#${this.htmlFor}`):null:this.currentControl||this.host.parentElement}set control(t){t?this.attach(t):this.detach()}constructor(t,e){this.host=t,this.onControlChange=e,this.currentControl=null,t.addController(this),t[bt]=this,_t?.observe(t,{attributeFilter:["for"]})}attach(t){t!==this.currentControl&&(this.setCurrentControl(t),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(t){this.onControlChange(this.currentControl,t),this.currentControl=t}}const xt=["focusin","focusout","pointerdown"];class FocusRing extends lit_element_s{constructor(){super(...arguments),this.visible=!1,this.inward=!1,this.attachableController=new AttachableController(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(t){this.attachableController.htmlFor=t}get control(){return this.attachableController.control}set control(t){this.attachableController.control=t}attach(t){this.attachableController.attach(t)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}handleEvent(t){if(!t[wt]){switch(t.type){default:return;case"focusin":this.visible=this.control?.matches(":focus-visible")??!1;break;case"focusout":case"pointerdown":this.visible=!1}t[wt]=!0}}onControlChange(t,e){for(const r of xt)t?.removeEventListener(r,this),e?.addEventListener(r,this)}update(t){t.has("visible")&&this.dispatchEvent(new Event("visibility-changed")),super.update(t)}}r([T({type:Boolean,reflect:!0})],FocusRing.prototype,"visible",void 0),r([T({type:Boolean,reflect:!0})],FocusRing.prototype,"inward",void 0);const wt=Symbol("handledByFocusRing"),Ct=h`:host{animation-delay:0s,calc(var(--md-focus-ring-duration, 600ms)*.25);animation-duration:calc(var(--md-focus-ring-duration, 600ms)*.25),calc(var(--md-focus-ring-duration, 600ms)*.75);animation-timing-function:cubic-bezier(0.2, 0, 0, 1);box-sizing:border-box;color:var(--md-focus-ring-color, var(--md-sys-color-secondary, #625b71));display:none;pointer-events:none;position:absolute}:host([visible]){display:flex}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));inset:calc(-1*var(--md-focus-ring-outward-offset, 2px));outline:var(--md-focus-ring-width, 3px) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border:var(--md-focus-ring-width, 3px) solid currentColor;inset:var(--md-focus-ring-inward-offset, 0px)}@keyframes outward-grow{from{outline-width:0}to{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes outward-shrink{from{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-grow{from{border-width:0}to{border-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-shrink{from{border-width:var(--md-focus-ring-active-width, 8px)}}@media(prefers-reduced-motion){:host{animation:none}}/*# sourceMappingURL=focus-ring-styles.css.map */
`;let kt=class extends FocusRing{};kt.styles=[Ct],kt=r([o("md-focus-ring")],kt);const zt=1;class directive_i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const St=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends directive_i{constructor(t){if(super(t),t.type!==zt||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(e)}const r=t.element.classList;for(const t of this.st)t in e||(r.remove(t),this.st.delete(t));for(const t in e){const i=!!e[t];i===this.st.has(t)||this.nt?.has(t)||(i?(r.add(t),this.st.add(t)):(r.remove(t),this.st.delete(t)))}return ht}}),$t="cubic-bezier(0.2, 0, 0, 1)",At="cubic-bezier(.3,0,0,1)";var Et;!function(t){t[t.INACTIVE=0]="INACTIVE",t[t.TOUCH_DELAY=1]="TOUCH_DELAY",t[t.HOLDING=2]="HOLDING",t[t.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"}(Et||(Et={}));const Tt=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],Mt=window.matchMedia("(forced-colors: active)");class Ripple extends lit_element_s{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=Et.INACTIVE,this.checkBoundsAfterContextMenu=!1,this.attachableController=new AttachableController(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(t){this.attachableController.htmlFor=t}get control(){return this.attachableController.control}set control(t){this.attachableController.control=t}attach(t){this.attachableController.attach(t)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){const t={hovered:this.hovered,pressed:this.pressed};return lt`<div class="surface ${St(t)}"></div>`}update(t){t.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(t)}handlePointerenter(t){this.shouldReactToEvent(t)&&(this.hovered=!0)}handlePointerleave(t){this.shouldReactToEvent(t)&&(this.hovered=!1,this.state!==Et.INACTIVE&&this.endPressAnimation())}handlePointerup(t){if(this.shouldReactToEvent(t)){if(this.state!==Et.HOLDING)return this.state===Et.TOUCH_DELAY?(this.state=Et.WAITING_FOR_CLICK,void this.startPressAnimation(this.rippleStartEvent)):void 0;this.state=Et.WAITING_FOR_CLICK}}async handlePointerdown(t){if(this.shouldReactToEvent(t)){if(this.rippleStartEvent=t,!this.isTouch(t))return this.state=Et.WAITING_FOR_CLICK,void this.startPressAnimation(t);this.checkBoundsAfterContextMenu&&!this.inBounds(t)||(this.checkBoundsAfterContextMenu=!1,this.state=Et.TOUCH_DELAY,await new Promise((t=>{setTimeout(t,150)})),this.state===Et.TOUCH_DELAY&&(this.state=Et.HOLDING,this.startPressAnimation(t)))}}handleClick(){this.disabled||(this.state!==Et.WAITING_FOR_CLICK?this.state===Et.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation()):this.endPressAnimation())}handlePointercancel(t){this.shouldReactToEvent(t)&&this.endPressAnimation()}handleContextmenu(){this.disabled||(this.checkBoundsAfterContextMenu=!0,this.endPressAnimation())}determineRippleSize(){const{height:t,width:e}=this.getBoundingClientRect(),r=Math.max(t,e),i=Math.max(.35*r,75),o=Math.floor(.2*r),s=Math.sqrt(e**2+t**2)+10;this.initialSize=o,this.rippleScale=""+(s+i)/o,this.rippleSize=`${o}px`}getNormalizedPointerEventCoords(t){const{scrollX:e,scrollY:r}=window,{left:i,top:o}=this.getBoundingClientRect(),s=e+i,a=r+o,{pageX:l,pageY:c}=t;return{x:l-s,y:c-a}}getTranslationCoordinates(t){const{height:e,width:r}=this.getBoundingClientRect(),i={x:(r-this.initialSize)/2,y:(e-this.initialSize)/2};let o;return o=t instanceof PointerEvent?this.getNormalizedPointerEventCoords(t):{x:r/2,y:e/2},o={x:o.x-this.initialSize/2,y:o.y-this.initialSize/2},{startPoint:o,endPoint:i}}startPressAnimation(t){if(!this.mdRoot)return;this.pressed=!0,this.growAnimation?.cancel(),this.determineRippleSize();const{startPoint:e,endPoint:r}=this.getTranslationCoordinates(t),i=`${e.x}px, ${e.y}px`,o=`${r.x}px, ${r.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${i}) scale(1)`,`translate(${o}) scale(${this.rippleScale})`]},{pseudoElement:"::after",duration:450,easing:$t,fill:"forwards"})}async endPressAnimation(){this.rippleStartEvent=void 0,this.state=Et.INACTIVE;const t=this.growAnimation;let e=1/0;"number"==typeof t?.currentTime?e=t.currentTime:t?.currentTime&&(e=t.currentTime.to("ms").value),e>=225?this.pressed=!1:(await new Promise((t=>{setTimeout(t,225-e)})),this.growAnimation===t&&(this.pressed=!1))}shouldReactToEvent(t){if(this.disabled||!t.isPrimary)return!1;if(this.rippleStartEvent&&this.rippleStartEvent.pointerId!==t.pointerId)return!1;if("pointerenter"===t.type||"pointerleave"===t.type)return!this.isTouch(t);const e=1===t.buttons;return this.isTouch(t)||e}inBounds({x:t,y:e}){const{top:r,left:i,bottom:o,right:s}=this.getBoundingClientRect();return t>=i&&t<=s&&e>=r&&e<=o}isTouch({pointerType:t}){return"touch"===t}async handleEvent(t){if(!Mt?.matches)switch(t.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(t);break;case"pointerdown":await this.handlePointerdown(t);break;case"pointerenter":this.handlePointerenter(t);break;case"pointerleave":this.handlePointerleave(t);break;case"pointerup":this.handlePointerup(t)}}onControlChange(t,e){for(const r of Tt)t?.removeEventListener(r,this),e?.addEventListener(r,this)}}r([T({type:Boolean,reflect:!0})],Ripple.prototype,"disabled",void 0),r([P()],Ripple.prototype,"hovered",void 0),r([P()],Ripple.prototype,"pressed",void 0),r([D(".surface")],Ripple.prototype,"mdRoot",void 0);const Pt=h`:host{display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors: active){:host{display:none}}:host,.surface{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:rgba(0,0,0,0)}.surface::before,.surface::after{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side, var(--md-ripple-pressed-color, var(--md-sys-color-on-surface, #1d1b20)) max(100% - 70px, 65%), transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-ripple-hover-opacity, 0.08)}.pressed::after{opacity:var(--md-ripple-pressed-opacity, 0.12);transition-duration:105ms}/*# sourceMappingURL=ripple-styles.css.map */
`;let Rt=class extends Ripple{};Rt.styles=[Pt],Rt=r([o("md-ripple")],Rt);const It=Symbol.for(""),Ot=t=>{if(t?.r===It)return t?._$litStatic$},Dt=(t,...e)=>({_$litStatic$:e.reduce(((e,r,i)=>e+(t=>{if(void 0!==t._$litStatic$)return t._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+t[i+1]),t[0]),r:It}),Bt=new Map,Lt=t=>(e,...r)=>{const i=r.length;let o,s;const a=[],l=[];let c,h=0,d=!1;for(;h<i;){for(c=e[h];h<i&&void 0!==(s=r[h],o=Ot(s));)c+=o+e[++h],d=!0;h!==i&&l.push(s),a.push(c),h++}if(h===i&&a.push(e[i]),d){const t=a.join("$$lit$$");void 0===(e=Bt.get(t))&&(a.raw=a,Bt.set(t,e=a)),r=l}return t(e,...r)},Ht=Lt(lt),Nt=(Lt(ct),["ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText"]);Nt.map(qt);function qt(t){return t.replace("aria","aria-").replace(/Elements?/g,"").toLowerCase()}function Ft(t){for(const e of Nt)t.createProperty(e,{attribute:qt(e),reflect:!0});t.addInitializer((t=>{const e={hostConnected(){t.setAttribute("role","presentation")}};t.addController(e)}))}const Wt=Symbol("internals"),Ut=Symbol("privateInternals");function jt(t){return class extends t{get[Wt](){return this[Ut]||(this[Ut]=this.attachInternals()),this[Ut]}}}function Gt(t){t.addInitializer((t=>{const e=t;e.addEventListener("click",(async t=>{const{type:r,[Wt]:i}=e,{form:o}=i;o&&"button"!==r&&(await new Promise((t=>{setTimeout(t)})),t.defaultPrevented||("reset"!==r?(o.addEventListener("submit",(t=>{Object.defineProperty(t,"submitter",{configurable:!0,enumerable:!0,get:()=>e})}),{capture:!0,once:!0}),i.setFormValue(e.value),o.requestSubmit()):o.reset()))}))}))}function Vt(t,e=!0){return e&&"rtl"===getComputedStyle(t).getPropertyValue("direction").trim()}const Qt=jt(lit_element_s);class IconButton extends Qt{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Vt(this,this.flipIconInRtl)}get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get form(){return this[Wt].form}get labels(){return this[Wt].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const t=this.href?Dt`div`:Dt`button`,{ariaLabel:e,ariaHasPopup:r,ariaExpanded:i}=this,o=e&&this.ariaLabelSelected,s=this.toggle?this.selected:dt;let a=dt;return this.href||(a=o&&this.selected?this.ariaLabelSelected:e),Ht`<${t}
        class="icon-button ${St(this.getRenderClasses())}"
        id="button"
        aria-label="${a||dt}"
        aria-haspopup="${!this.href&&r||dt}"
        aria-expanded="${!this.href&&i||dt}"
        aria-pressed="${s}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?dt:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():dt}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${t}>`}renderLink(){const{ariaLabel:t}=this;return lt`
      <a
        class="link"
        id="link"
        href="${this.href}"
        target="${this.target||dt}"
        aria-label="${t||dt}"></a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return lt`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return lt`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return lt`<span class="touch"></span>`}renderFocusRing(){return lt`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){return lt`<md-ripple
      for=${this.href?"link":dt}
      ?disabled="${!this.href&&this.disabled}"></md-ripple>`}connectedCallback(){this.flipIcon=Vt(this,this.flipIconInRtl),super.connectedCallback()}async handleClick(t){await 0,!this.toggle||this.disabled||t.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}Ft(IconButton),Gt(IconButton),IconButton.formAssociated=!0,IconButton.shadowRootOptions={mode:"open",delegatesFocus:!0},r([T({type:Boolean,reflect:!0})],IconButton.prototype,"disabled",void 0),r([T({type:Boolean,attribute:"flip-icon-in-rtl"})],IconButton.prototype,"flipIconInRtl",void 0),r([T()],IconButton.prototype,"href",void 0),r([T()],IconButton.prototype,"target",void 0),r([T({attribute:"aria-label-selected"})],IconButton.prototype,"ariaLabelSelected",void 0),r([T({type:Boolean})],IconButton.prototype,"toggle",void 0),r([T({type:Boolean,reflect:!0})],IconButton.prototype,"selected",void 0),r([T()],IconButton.prototype,"type",void 0),r([T({reflect:!0})],IconButton.prototype,"value",void 0),r([P()],IconButton.prototype,"flipIcon",void 0);const Zt=h`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:none;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host([disabled]){--_disabled-icon-opacity: 1}}/*# sourceMappingURL=shared-styles.css.map */
`,Kt=h`:host{--_disabled-icon-color: var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size: var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color: var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height: var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape: var(--md-icon-button-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));--_state-layer-width: var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color: var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity: var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color: var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity: var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start: 0;--_container-shape-start-end: 0;--_container-shape-end-end: 0;--_container-shape-end-start: 0;--_container-height: 0;--_container-width: 0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_state-layer-height))/2) max(0px,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_state-layer-shape);--md-focus-ring-shape-start-end: var(--_state-layer-shape);--md-focus-ring-shape-end-end: var(--_state-layer-shape);--md-focus-ring-shape-end-start: var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:disabled{color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:disabled .icon{opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}/*# sourceMappingURL=standard-styles.css.map */
`;let Xt=class extends IconButton{getRenderClasses(){return{...super.getRenderClasses(),standard:!0}}};Xt.styles=[Zt,Kt],Xt=r([o("md-icon-button")],Xt);class Icon extends lit_element_s{render(){return lt`<slot></slot>`}connectedCallback(){super.connectedCallback();"false"!==this.getAttribute("aria-hidden")?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")}}const Yt=h`:host{font-size:var(--md-icon-size, 24px);width:var(--md-icon-size, 24px);height:var(--md-icon-size, 24px);color:inherit;font-variation-settings:inherit;font-weight:400;font-family:var(--md-icon-font, Material Symbols Outlined);display:inline-flex;font-style:normal;place-items:center;place-content:center;line-height:1;overflow:hidden;letter-spacing:normal;text-transform:none;user-select:none;white-space:nowrap;word-wrap:normal;flex-shrink:0;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale}::slotted(svg){fill:currentColor}::slotted(*){height:100%;width:100%}/*# sourceMappingURL=icon-styles.css.map */
`;let Jt=class extends Icon{};Jt.styles=[Yt],Jt=r([o("md-icon")],Jt);class Elevation extends lit_element_s{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return lt`<span class="shadow"></span>`}}const te=h`:host{display:flex;pointer-events:none}:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}/*# sourceMappingURL=elevation-styles.css.map */
`;let ee=class extends Elevation{};function re(t){return t.currentTarget===t.target&&(t.composedPath()[0]===t.target&&(!t.target.disabled&&!function(t){const e=ie;e&&(t.preventDefault(),t.stopImmediatePropagation());return async function(){ie=!0,await null,ie=!1}(),e}(t)))}ee.styles=[te],ee=r([o("md-elevation")],ee);let ie=!1;const oe=jt(lit_element_s);class Button extends oe{get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get form(){return this[Wt].form}constructor(){super(),this.disabled=!1,this.href="",this.target="",this.trailingIcon=!1,this.hasIcon=!1,this.type="submit",this.value="",this.handleActivationClick=t=>{re(t)&&this.buttonElement&&(this.focus(),function(t){const e=new MouseEvent("click",{bubbles:!0});t.dispatchEvent(e)}(this.buttonElement))},this.addEventListener("click",this.handleActivationClick)}focus(){this.buttonElement?.focus()}blur(){this.buttonElement?.blur()}render(){const t=this.disabled&&!this.href,e=this.href?this.renderLink():this.renderButton(),r=this.href?"link":"button";return lt`
      ${this.renderElevationOrOutline?.()}
      <div class="background"></div>
      <md-focus-ring part="focus-ring" for=${r}></md-focus-ring>
      <md-ripple for=${r} ?disabled="${t}"></md-ripple>
      ${e}
    `}renderButton(){const{ariaLabel:t,ariaHasPopup:e,ariaExpanded:r}=this;return lt`<button
      id="button"
      class="button"
      ?disabled=${this.disabled}
      aria-label="${t||dt}"
      aria-haspopup="${e||dt}"
      aria-expanded="${r||dt}">
      ${this.renderContent()}
    </button>`}renderLink(){const{ariaLabel:t,ariaHasPopup:e,ariaExpanded:r}=this;return lt`<a
      id="link"
      class="button"
      aria-label="${t||dt}"
      aria-haspopup="${e||dt}"
      aria-expanded="${r||dt}"
      href=${this.href}
      target=${this.target||dt}
      >${this.renderContent()}
    </a>`}renderContent(){const t=lt`<slot
      name="icon"
      @slotchange="${this.handleSlotChange}"></slot>`;return lt`
      <span class="touch"></span>
      ${this.trailingIcon?dt:t}
      <span class="label"><slot></slot></span>
      ${this.trailingIcon?t:dt}
    `}handleSlotChange(){this.hasIcon=this.assignedIcons.length>0}}Ft(Button),Gt(Button),Button.formAssociated=!0,Button.shadowRootOptions={mode:"open",delegatesFocus:!0},r([T({type:Boolean,reflect:!0})],Button.prototype,"disabled",void 0),r([T()],Button.prototype,"href",void 0),r([T()],Button.prototype,"target",void 0),r([T({type:Boolean,attribute:"trailing-icon",reflect:!0})],Button.prototype,"trailingIcon",void 0),r([T({type:Boolean,attribute:"has-icon",reflect:!0})],Button.prototype,"hasIcon",void 0),r([T()],Button.prototype,"type",void 0),r([T({reflect:!0})],Button.prototype,"value",void 0),r([D(".button")],Button.prototype,"buttonElement",void 0),r([B({slot:"icon",flatten:!0})],Button.prototype,"assignedIcons",void 0);class FilledButton extends Button{renderElevationOrOutline(){return lt`<md-elevation></md-elevation>`}}const ne=h`:host{--_container-color: var(--md-filled-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-elevation: var(--md-filled-button-container-elevation, 0);--_container-height: var(--md-filled-button-container-height, 40px);--_container-shadow-color: var(--md-filled-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color: var(--md-filled-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-button-focus-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-container-elevation: var(--md-filled-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-button-hover-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color: var(--md-filled-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity: var(--md-filled-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-button-label-text-color, var(--md-sys-color-on-primary, #fff));--_label-text-font: var(--md-filled-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-filled-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-filled-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation: var(--md-filled-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-button-pressed-label-text-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color: var(--md-filled-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity: var(--md-filled-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color: var(--md-filled-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-color: var(--md-filled-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size: var(--md-filled-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_container-shape-start-start: var(--md-filled-button-container-shape-start-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-filled-button-container-shape-start-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-filled-button-container-shape-end-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-filled-button-container-shape-end-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-filled-button-leading-space, 24px);--_trailing-space: var(--md-filled-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-button-with-trailing-icon-trailing-space, 16px)}/*# sourceMappingURL=filled-styles.css.map */
`,se=h`md-elevation{transition-duration:280ms}:host([disabled]) md-elevation{transition:none}md-elevation{--md-elevation-level: var(--_container-elevation);--md-elevation-shadow-color: var(--_container-shadow-color)}:host(:focus-within) md-elevation{--md-elevation-level: var(--_focus-container-elevation)}:host(:hover) md-elevation{--md-elevation-level: var(--_hover-container-elevation)}:host(:active) md-elevation{--md-elevation-level: var(--_pressed-container-elevation)}:host([disabled]) md-elevation{--md-elevation-level: var(--_disabled-container-elevation)}/*# sourceMappingURL=shared-elevation-styles.css.map */
`,ae=h`:host{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end);box-sizing:border-box;cursor:pointer;display:inline-flex;gap:8px;min-height:var(--_container-height);outline:none;padding-block:calc((var(--_container-height) - max(var(--_label-text-line-height),var(--_icon-size)))/2);padding-inline-start:var(--_leading-space);padding-inline-end:var(--_trailing-space);place-content:center;place-items:center;position:relative;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-overflow:ellipsis;text-wrap:nowrap;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);vertical-align:top;--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){cursor:default;pointer-events:none}.button{border-radius:inherit;cursor:inherit;display:inline-flex;align-items:center;justify-content:center;border:none;outline:none;-webkit-appearance:none;vertical-align:middle;background:rgba(0,0,0,0);text-decoration:none;min-width:calc(64px - var(--_leading-space) - var(--_trailing-space));width:100%;z-index:0;height:100%;font:inherit;color:var(--_label-text-color);padding:0;gap:inherit}.button::-moz-focus-inner{padding:0;border:0}:host(:hover) .button{color:var(--_hover-label-text-color)}:host(:focus-within) .button{color:var(--_focus-label-text-color)}:host(:active) .button{color:var(--_pressed-label-text-color)}.background{background-color:var(--_container-color);border-radius:inherit;inset:0;position:absolute}.label{overflow:hidden}:is(.button,.label,.label slot),.label ::slotted(*){text-overflow:inherit}:host([disabled]) .label{color:var(--_disabled-label-text-color);opacity:var(--_disabled-label-text-opacity)}:host([disabled]) .background{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}@media(forced-colors: active){.background{border:1px solid CanvasText}:host([disabled]){--_disabled-icon-color: GrayText;--_disabled-icon-opacity: 1;--_disabled-container-opacity: 1;--_disabled-label-text-color: GrayText;--_disabled-label-text-opacity: 1}}:host([has-icon]:not([trailing-icon])){padding-inline-start:var(--_with-leading-icon-leading-space);padding-inline-end:var(--_with-leading-icon-trailing-space)}:host([has-icon][trailing-icon]){padding-inline-start:var(--_with-trailing-icon-leading-space);padding-inline-end:var(--_with-trailing-icon-trailing-space)}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;flex-shrink:0;color:var(--_icon-color);font-size:var(--_icon-size);inline-size:var(--_icon-size);block-size:var(--_icon-size)}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus-within) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([disabled]) ::slotted([slot=icon]){color:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) 0}:host([touch-target=none]) .touch{display:none}/*# sourceMappingURL=shared-styles.css.map */
`;let le=class extends FilledButton{};le.styles=[ae,se,ne],le=r([o("md-filled-button")],le);class OutlinedButton extends Button{renderElevationOrOutline(){return lt`<div class="outline"></div>`}}const ce=h`:host{--_container-height: var(--md-outlined-button-container-height, 40px);--_disabled-label-text-color: var(--md-outlined-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-outlined-button-disabled-label-text-opacity, 0.38);--_disabled-outline-color: var(--md-outlined-button-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-outlined-button-disabled-outline-opacity, 0.12);--_focus-label-text-color: var(--md-outlined-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color: var(--md-outlined-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color: var(--md-outlined-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity: var(--md-outlined-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-outlined-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font: var(--md-outlined-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-outlined-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-outlined-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-outlined-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_outline-color: var(--md-outlined-button-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width: var(--md-outlined-button-outline-width, 1px);--_pressed-label-text-color: var(--md-outlined-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-outline-color: var(--md-outlined-button-pressed-outline-color, var(--md-sys-color-outline, #79747e));--_pressed-state-layer-color: var(--md-outlined-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-outlined-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-outlined-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-outlined-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-outlined-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color: var(--md-outlined-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color: var(--md-outlined-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-outlined-button-icon-size, 18px);--_pressed-icon-color: var(--md-outlined-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var(--md-outlined-button-container-shape-start-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-outlined-button-container-shape-start-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-outlined-button-container-shape-end-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-outlined-button-container-shape-end-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-outlined-button-leading-space, 24px);--_trailing-space: var(--md-outlined-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-outlined-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-outlined-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-outlined-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-outlined-button-with-trailing-icon-trailing-space, 16px);--_container-color: none;--_disabled-container-color: none;--_disabled-container-opacity: 0}.outline{inset:0;border-style:solid;position:absolute;box-sizing:border-box;border-color:var(--_outline-color);border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}:host(:active) .outline{border-color:var(--_pressed-outline-color)}:host([disabled]) .outline{border-color:var(--_disabled-outline-color);opacity:var(--_disabled-outline-opacity)}@media(forced-colors: active){:host([disabled]) .background{border-color:GrayText}:host([disabled]) .outline{opacity:1}}.outline,md-ripple{border-width:var(--_outline-width)}md-ripple{inline-size:calc(100% - 2*var(--_outline-width));block-size:calc(100% - 2*var(--_outline-width));border-style:solid;border-color:rgba(0,0,0,0)}/*# sourceMappingURL=outlined-styles.css.map */
`;let he=class extends OutlinedButton{};he.styles=[ae,ce],he=r([o("md-outlined-button")],he);class Divider extends lit_element_s{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}r([T({type:Boolean,reflect:!0})],Divider.prototype,"inset",void 0),r([T({type:Boolean,reflect:!0,attribute:"inset-start"})],Divider.prototype,"insetStart",void 0),r([T({type:Boolean,reflect:!0,attribute:"inset-end"})],Divider.prototype,"insetEnd",void 0);const de=h`:host{box-sizing:border-box;color:var(--md-divider-color, var(--md-sys-color-outline-variant, #cac4d0));display:flex;height:var(--md-divider-thickness, 1px);width:100%}:host([inset]),:host([inset-start]){padding-inline-start:16px}:host([inset]),:host([inset-end]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors: active){:host::before{background:CanvasText}}/*# sourceMappingURL=divider-styles.css.map */
`;let ue=class extends Divider{};ue.styles=[de],ue=r([o("md-divider")],ue);const pe=Symbol("isFocusable"),me=Symbol("privateIsFocusable"),fe=Symbol("externalTabIndex"),ve=Symbol("isUpdatingTabIndex"),ge=Symbol("updateTabIndex");var ye;const be=Symbol("indicator"),_e=Symbol("animateIndicator"),xe=function(t){var e,i,o;class FocusableElement extends t{constructor(){super(...arguments),this[e]=!0,this[i]=null,this[o]=!1}get[pe](){return this[me]}set[pe](t){this[pe]!==t&&(this[me]=t,this[ge]())}connectedCallback(){super.connectedCallback(),this[ge]()}attributeChangedCallback(t,e,r){if("tabindex"===t){if(this.requestUpdate("tabIndex",Number(e??-1)),!this[ve])return this.hasAttribute("tabindex")?void(this[fe]=this.tabIndex):(this[fe]=null,void this[ge]())}else super.attributeChangedCallback(t,e,r)}[(e=me,i=fe,o=ve,ge)](){const t=this[pe]?0:-1,e=this[fe]??t;this[ve]=!0,this.tabIndex=e,this[ve]=!1}}return r([T({noAccessor:!0})],FocusableElement.prototype,"tabIndex",void 0),FocusableElement}(lit_element_s);class Tab extends xe{get selected(){return this.active}set selected(t){this.active=t}constructor(){super(),this.isTab=!0,this.active=!1,this.hasIcon=!1,this.iconOnly=!1,this.fullWidthIndicator=!1,this.internals=this.attachInternals(),this.internals.role="tab",this.addEventListener("keydown",this.handleKeydown.bind(this))}render(){const t=lt`<div class="indicator"></div>`;return lt`<div
      class="button"
      role="presentation"
      @click=${this.handleContentClick}>
      <md-focus-ring part="focus-ring" inward .control=${this}></md-focus-ring>
      <md-elevation></md-elevation>
      <md-ripple .control=${this}></md-ripple>
      <div
        class="content ${St(this.getContentClasses())}"
        role="presentation">
        <slot name="icon" @slotchange=${this.handleIconSlotChange}></slot>
        <slot @slotchange=${this.handleSlotChange}></slot>
        ${this.fullWidthIndicator?dt:t}
      </div>
      ${this.fullWidthIndicator?t:dt}
    </div>`}getContentClasses(){return{"has-icon":this.hasIcon,"has-label":!this.iconOnly}}updated(){this.internals.ariaSelected=String(this.active)}async handleKeydown(t){await 0,t.defaultPrevented||"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.click())}handleContentClick(t){t.stopPropagation(),this.click()}[(ye=be,_e)](t){if(!this[be])return;this[be].getAnimations().forEach((t=>{t.cancel()}));const e=this.getKeyframes(t);null!==e&&this[be].animate(e,{duration:250,easing:At})}getKeyframes(t){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!this.active)return e?[{opacity:1},{transform:"none"}]:null;const r={},i=t[be]?.getBoundingClientRect()??{},o=i.left,s=i.width,a=this[be].getBoundingClientRect(),l=a.left,c=s/a.width;return e||void 0===o||void 0===l||isNaN(c)?r.opacity=0:r.transform=`translateX(${(o-l).toFixed(4)}px) scaleX(${c.toFixed(4)})`,[r,{transform:"none"}]}handleSlotChange(){this.iconOnly=!1;for(const t of this.assignedDefaultNodes){const e=t.nodeType===Node.TEXT_NODE&&!!t.wholeText.match(/\S/);if(t.nodeType===Node.ELEMENT_NODE||e)return}this.iconOnly=!0}handleIconSlotChange(){this.hasIcon=this.assignedIcons.length>0}}r([T({type:Boolean,reflect:!0,attribute:"md-tab"})],Tab.prototype,"isTab",void 0),r([T({type:Boolean,reflect:!0})],Tab.prototype,"active",void 0),r([T({type:Boolean})],Tab.prototype,"selected",null),r([T({type:Boolean,attribute:"has-icon"})],Tab.prototype,"hasIcon",void 0),r([T({type:Boolean,attribute:"icon-only"})],Tab.prototype,"iconOnly",void 0),r([D(".indicator")],Tab.prototype,ye,void 0),r([P()],Tab.prototype,"fullWidthIndicator",void 0),r([function(t){return(e,r)=>{const{slot:i}=t??{},o="slot"+(i?`[name=${i}]`:":not([name])");return O(e,r,{get(){const e=this.renderRoot?.querySelector(o);return e?.assignedNodes(t)??[]}})}}({flatten:!0})],Tab.prototype,"assignedDefaultNodes",void 0),r([B({slot:"icon",flatten:!0})],Tab.prototype,"assignedIcons",void 0);class Tabs extends lit_element_s{get activeTab(){return this.tabs.find((t=>t.active))??null}set activeTab(t){t&&this.activateTab(t)}get activeTabIndex(){return this.tabs.findIndex((t=>t.active))}set activeTabIndex(t){const e=()=>{const e=this.tabs[t];e&&this.activateTab(e)};this.slotElement?e():this.updateComplete.then(e)}get focusedTab(){return this.tabs.find((t=>t.matches(":focus-within")))}constructor(){super(),this.autoActivate=!1,this.internals=this.attachInternals(),this.internals.role="tablist",this.addEventListener("keydown",this.handleKeydown.bind(this)),this.addEventListener("keyup",this.handleKeyup.bind(this)),this.addEventListener("focusout",this.handleFocusout.bind(this))}async scrollToTab(t){await this.updateComplete;const{tabs:e}=this;if(t??(t=this.activeTab),!t||!e.includes(t)||!this.tabsScrollerElement)return;for(const t of this.tabs)await t.updateComplete;const r=t.offsetLeft,i=t.offsetWidth,o=this.scrollLeft,s=r-48,a=r+i-this.offsetWidth+48,l=Math.min(s,Math.max(a,o)),c=this.focusedTab?"instant":"smooth";this.tabsScrollerElement.scrollTo({behavior:c,top:0,left:l})}render(){return lt`
      <div class="tabs">
        <slot
          @slotchange=${this.handleSlotChange}
          @click=${this.handleTabClick}></slot>
      </div>
      <md-divider part="divider"></md-divider>
    `}async handleTabClick(t){const e=t.target;var r;(await 0,t.defaultPrevented||!((r=e)instanceof HTMLElement&&r.hasAttribute("md-tab"))||e.active)||this.activateTab(e)}activateTab(t){const{tabs:e}=this,r=this.activeTab;if(e.includes(t)&&r!==t){for(const r of e)r.active=r===t;if(r){if(!this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))){for(const t of e)t.active=t===r;return}t[_e](r)}this.updateFocusableTab(t),this.scrollToTab(t)}}updateFocusableTab(t){for(const e of this.tabs)e.tabIndex=e===t?0:-1}async handleKeydown(t){await 0;const e="ArrowLeft"===t.key,r="ArrowRight"===t.key,i="Home"===t.key,o="End"===t.key;if(t.defaultPrevented||!e&&!r&&!i&&!o)return;const{tabs:s}=this;if(s.length<2)return;let a;if(t.preventDefault(),i||o)a=i?0:s.length-1;else{const t="rtl"===getComputedStyle(this).direction?e:r,{focusedTab:i}=this;if(i){const e=this.tabs.indexOf(i);a=t?e+1:e-1,a>=s.length?a=0:a<0&&(a=s.length-1)}else a=t?0:s.length-1}const l=s[a];l.focus(),this.autoActivate?this.activateTab(l):this.updateFocusableTab(l)}handleKeyup(){this.scrollToTab(this.focusedTab??this.activeTab)}handleFocusout(){if(this.matches(":focus-within"))return;const{activeTab:t}=this;t&&this.updateFocusableTab(t)}handleSlotChange(){const t=this.tabs[0];!this.activeTab&&t&&this.activateTab(t),this.scrollToTab(this.activeTab)}}r([B({flatten:!0,selector:"[md-tab]"})],Tabs.prototype,"tabs",void 0),r([T({type:Number,attribute:"active-tab-index"})],Tabs.prototype,"activeTabIndex",null),r([T({type:Boolean,attribute:"auto-activate"})],Tabs.prototype,"autoActivate",void 0),r([D(".tabs")],Tabs.prototype,"tabsScrollerElement",void 0),r([D("slot")],Tabs.prototype,"slotElement",void 0);const we=h`:host{box-sizing:border-box;display:flex;flex-direction:column;overflow:auto;scroll-behavior:smooth;scrollbar-width:none;position:relative}:host([hidden]){display:none}:host::-webkit-scrollbar{display:none}.tabs{align-items:end;display:flex;height:100%;overflow:inherit;justify-content:space-between;width:100%}::slotted(*){flex:1}::slotted([active]){z-index:1}/*# sourceMappingURL=tabs-styles.css.map */
`;let Ce=class extends Tabs{};Ce.styles=[we],Ce=r([o("md-tabs")],Ce);class PrimaryTab extends Tab{constructor(){super(...arguments),this.inlineIcon=!1}getContentClasses(){return{...super.getContentClasses(),stacked:!this.inlineIcon}}}r([T({type:Boolean,attribute:"inline-icon"})],PrimaryTab.prototype,"inlineIcon",void 0);const ke=h`:host{--_active-indicator-color: var(--md-primary-tab-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-height: var(--md-primary-tab-active-indicator-height, 3px);--_active-indicator-shape: var(--md-primary-tab-active-indicator-shape, 3px 3px 0px 0px);--_active-hover-state-layer-color: var(--md-primary-tab-active-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_active-hover-state-layer-opacity: var(--md-primary-tab-active-hover-state-layer-opacity, 0.08);--_active-pressed-state-layer-color: var(--md-primary-tab-active-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-state-layer-opacity: var(--md-primary-tab-active-pressed-state-layer-opacity, 0.12);--_container-color: var(--md-primary-tab-container-color, var(--md-sys-color-surface, #fef7ff));--_container-elevation: var(--md-primary-tab-container-elevation, 0);--_container-height: var(--md-primary-tab-container-height, 48px);--_with-icon-and-label-text-container-height: var(--md-primary-tab-with-icon-and-label-text-container-height, 64px);--_hover-state-layer-color: var(--md-primary-tab-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-primary-tab-hover-state-layer-opacity, 0.08);--_pressed-state-layer-color: var(--md-primary-tab-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-primary-tab-pressed-state-layer-opacity, 0.12);--_active-focus-icon-color: var(--md-primary-tab-active-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_active-hover-icon-color: var(--md-primary-tab-active-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_active-icon-color: var(--md-primary-tab-active-icon-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-icon-color: var(--md-primary-tab-active-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-primary-tab-icon-size, 24px);--_focus-icon-color: var(--md-primary-tab-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color: var(--md-primary-tab-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_icon-color: var(--md-primary-tab-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-primary-tab-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font: var(--md-primary-tab-label-text-font, var(--md-sys-typescale-title-small-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-primary-tab-label-text-line-height, var(--md-sys-typescale-title-small-line-height, 1.25rem));--_label-text-size: var(--md-primary-tab-label-text-size, var(--md-sys-typescale-title-small-size, 0.875rem));--_label-text-weight: var(--md-primary-tab-label-text-weight, var(--md-sys-typescale-title-small-weight, var(--md-ref-typeface-weight-medium, 500)));--_active-focus-label-text-color: var(--md-primary-tab-active-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-hover-label-text-color: var(--md-primary-tab-active-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-label-text-color: var(--md-primary-tab-active-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-label-text-color: var(--md-primary-tab-active-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-label-text-color: var(--md-primary-tab-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-primary-tab-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-color: var(--md-primary-tab-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-label-text-color: var(--md-primary-tab-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_container-shape-start-start: var(--md-primary-tab-container-shape-start-start, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-start-end: var(--md-primary-tab-container-shape-start-end, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-end: var(--md-primary-tab-container-shape-end-end, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-primary-tab-container-shape-end-start, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)))}.content.stacked{flex-direction:column;gap:2px}.content.stacked.has-icon.has-label{height:var(--_with-icon-and-label-text-container-height)}/*# sourceMappingURL=primary-tab-styles.css.map */
`,ze=h`:host{display:inline-flex;align-items:center;justify-content:center;outline:none;padding:0 16px;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);vertical-align:middle;user-select:none;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);color:var(--_label-text-color);z-index:0;--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity);--md-elevation-level: var(--_container-elevation)}md-focus-ring{--md-focus-ring-shape: 8px}:host([active]) md-focus-ring{margin-bottom:calc(var(--_active-indicator-height) + 1px)}.button::before{background:var(--_container-color);content:"";inset:0;position:absolute;z-index:-1}.button::before,md-ripple,md-elevation{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start)}.content{position:relative;box-sizing:border-box;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;height:var(--_container-height);gap:8px}.indicator{position:absolute;box-sizing:border-box;z-index:-1;transform-origin:bottom left;background:var(--_active-indicator-color);border-radius:var(--_active-indicator-shape);height:var(--_active-indicator-height);inset:auto 0 0 0;opacity:0}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;color:var(--_icon-color);font-size:var(--_icon-size);width:var(--_icon-size);height:var(--_icon-size)}:host(:hover){color:var(--_hover-label-text-color);cursor:pointer}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus){color:var(--_focus-label-text-color)}:host(:focus) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active){color:var(--_pressed-label-text-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([active]) .indicator{opacity:1}:host([active]){color:var(--_active-label-text-color);--md-ripple-hover-color: var(--_active-hover-state-layer-color);--md-ripple-hover-opacity: var(--_active-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_active-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_active-pressed-state-layer-opacity)}:host([active]) ::slotted([slot=icon]){color:var(--_active-icon-color)}:host([active]:hover){color:var(--_active-hover-label-text-color)}:host([active]:hover) ::slotted([slot=icon]){color:var(--_active-hover-icon-color)}:host([active]:focus){color:var(--_active-focus-label-text-color)}:host([active]:focus) ::slotted([slot=icon]){color:var(--_active-focus-icon-color)}:host([active]:active){color:var(--_active-pressed-label-text-color)}:host([active]:active) ::slotted([slot=icon]){color:var(--_active-pressed-icon-color)}:host,::slotted(*){white-space:nowrap}@media(forced-colors: active){.indicator{background:CanvasText}}/*# sourceMappingURL=tab-styles.css.map */
`;let Se=class extends PrimaryTab{};Se.styles=[ze,ke],Se=r([o("md-primary-tab")],Se);let $e={};window.observers=$e;const Ae=Symbol("callback"),Ee=Symbol("key_error"),Te=(t,e)=>{if(!e.length)return t;if(!(e[0]in t))return Ee;for(const r of e){if(null==t||!(r in t))return;t=t[r]}return t},Me=(t,e,r)=>{if(r&&r._variables){const e=Te(r._variables,t);if(e!=Ee)return e}const i=Re(t,e,r);return Te(i,t)},Pe=(t,e)=>{let r=((t,e)=>t.reduce(((t,e,r)=>(e in t||(t[e]={[Ae]:[]}),t[e])),e))(t,$e);r[Ae].push(e)},Re=(t,e,r={})=>{let i=r[t[0]];for(;void 0!==i;)t.shift(),t.unshift(...i),i=r[t[0]];return"this"!=t[0]?window.state:(t.shift(),e)},Ie=t=>{if("undefined"===t)return;if("null"===t)return null;const e=Number(t);if(!isNaN(e))return e;if(t.length>1&&"'"===t[0]&&"'"===t.at(-1)){return t.slice(1,-1)}},Oe=(t,e,r,i)=>{let o,[s,a]=(t=>{const e=t.split(/^\{(!{0,2}[a-zA-Z0-9_.?:;\-\ ]+)(?:\(([^)]*)\))?\}$/);return e.length<3?[]:e.slice(1,-1)})(t);if(!s)return!1;if("!"===s[0]&&(s=s.substring(1),"!"===s[0]?(s=s.substring(1),o=t=>!!t):o=t=>!t),null!=a)return((t,e,r,i,o,s)=>{let a=[];""==e||(a=e.split(",").map((t=>t.trim())));const l=t.split("."),c=Re(l,r,i);let h=Te(c,l);if(!h||h===Ee)return void console.warn(`Function at path ${l} does not exist in scope`,c);h=h.bind(c);const d=[],u=()=>s(h(...d),o,!0,void 0);for(let[t,e]of Object.entries(a)){const o=Ie(e);if(null!=o){d[t]=o;continue}const s=e.split("."),a=Me(s,r,i);if(a===Ee)return!1;d[t]=a,Pe(s,(e=>{d[t]=e,u()}))}return Pe(l,(t=>{h=t,u()})),u(),!0})(s,a,e,r,o,i);{let t=s.split("?"),a=!1;if(1===t.length){if(""==t[0])return!1;a=!0}else if(2!==t.length||""==t[1])return!1;var[l,c]=t;l=l.split(".");let h=Me(l,e,r);if(h===Ee)return!1;i(h,o,a,c),Pe(l,(t=>i(t,o,a,c)))}return!0},De=(t,e,r)=>{for(const[i,o]of Object.entries(t)){let t=null==e?e:e[i],s=null==r?r:r[i];De(o,t,s)}let i=t[Ae];if(i)for(const t of i)t(e,r)},Be=t=>{const e=Object.entries(t.nodes);return 0===e.length?[[]]:e.map((([t,e])=>Be(e).map((e=>[...e,t])))).flat()},Le=(t={})=>({nextProxies:{},nodes:t,get paths(){return Be(this)},pathsTo(t){return this.paths.map((e=>[...e,t]))},get(t,e,r){if("__handler"===e)return this;if("__target"===e)return t;const i=Reflect.get(t,e);if(i instanceof Element)return i;if("object"!=typeof i||null===i)return i;if("__proxyFilter"in t&&!t.__proxyFilter(e))return i;let o=this.nextProxies[e];if(o)return o;if("__computedProperty"in i){const r=[...this.paths[0],e];return s=r,a=i.__computedProperty.observedPaths,l=i.__computedProperty.fn,((t,e,r,i)=>{if("function"!=typeof t)return console.warn("Not a function"),!1;if(!Array.isArray(e))return console.warn("Observed path must be an array"),!1;t=t.bind(r);const o=[];for(let[s,a]of Object.entries(e)){const e=Ie(a);if(null!=e){o[s]=e;continue}const l=a.split("."),c=Me(l,r,i);if(c===Ee)return!1;o[s]=c,Pe(l,(e=>{o[s]=e,t(...o)}))}return t(...o),!0})(((...t)=>{const e=l.bind(window.state)(...t);((t,e)=>{let r;if(Array.isArray(t))r=[...t];else{if("string"!=typeof t)return console.warn(`path must be array or dot separated string, found: "${typeof t}"`),!1;r=t.split(".")}const i=r.pop();let o=window.state;for(const e of r){if(null==o||!(e in o))return console.warn(`Cannot set state value at path ${t} => error at key ${e}.`),!1;o=o[e]}null==o?console.warn(`Cannot set state value at path ${t}`):o[i]=e})(s,e)}),a,window.state,{})||console.warn('Computed property could not be initialized.\npath: "'+s+'"\nobserved: ['+a.join(", ")+"]"),Reflect.get(t,e)}var s,a,l;if("__observedProperty"in i){const r=[...this.paths[0],e];return Pe(r,i.__observedProperty.callback),Reflect.set(t,e,i.__observedProperty.initialValue),i.__observedProperty.initialValue}let c=Le({[e]:this});return o=new Proxy(Reflect.get(t,e),c),this.nextProxies[e]=o,o},set(t,e,r,i){let o;const s=Reflect.get(t,e);if(null==r)e in this.nextProxies&&(delete this.nextProxies[e].__handler.nodes[e],delete this.nextProxies[e]),o=this.pathsTo(e),Reflect.set(t,e,r),t[e]=r;else if(r.__handler)delete this.nextProxies[e]?.__handler.nodes[e],o=this.pathsTo(e),t[e]=r,r.__handler.nodes[e]=this,this.nextProxies[e]=r;else{if(delete this.nextProxies[e],null!=t[e]&&"object"==typeof t[e]){if("__observedProperty"in t[e])return void(t[e]=r);t[e]=r}else t[e]=r;o=this.pathsTo(e)}return o.map((t=>{let e=Te($e,t);e&&De(e,r,s)})),!0}}),He=(t,e)=>{Pe(t.split("."),e)};function Ne(t,e,r){return r&&(t=t.map((t=>r+"."+t))),{__computedProperty:{observedPaths:t,fn:e}}}Ne.basePath=t=>(e,r)=>Ne(e,r,t);const qe=(t,e,r,i,o)=>{let s;Oe(r,t,e,((t,e,r,i)=>{e&&(t=e(t)),r?(s!==t&&s&&o.toggle(s,!1),t&&o.toggle(t,!0)):t&&o.toggle(i,t),s=t}))&&r&&o.toggle(r,!1)},Fe=(t,e,r)=>t.classList.forEach(qe.bind(null,e,r)),We=(t,e,r,i,o)=>{const s=e.match(/^([a-zA-Z0-9_\.]*)\(([^)]*)\)$/);if(!s)return void console.warn(`${e} is not a valid function call`);const a=s[1],l=a.split("."),c=Re(l,i,o),h=s[2].split(",").map((t=>t.trim())),d=[],u=l.pop(),p=t=>{let e=Te(c,l);"function"==typeof e[u]?(h.forEach(((e,s)=>{if("event"===e)return void(d[s]=t);if("node"===e)return void(d[s]=r);const a=((t,e,r)=>{const i=Ie(t);if(void 0!==i)return i;const o=t.split(".");return Me(o,e,r)})(e,i,o);d[s]=void 0!==a?a:h[s]})),e[u](...d)):console.warn("No function "+u+' at path "'+a+'" in scope',c,l,e,u)};"@attached"===t?p():r.addEventListener(t,p)};const Ue=(t,e,r)=>[...t.attributes].forEach((i=>{if("class"!=i.name)return"@"===i.name[0]?(We(i.name.substring(1),i.value,t,e,r),void t.removeAttribute(i.name)):void((t,e,r,i,o)=>{let s=!1;var a;"."==t[0]&&(a=t.substring(1),t=a.replace(/([-_]\w)/g,(t=>t.toUpperCase().replace("-","").replace("_",""))),s=!0),Oe(e,i,o,((e,i,o,a)=>{i&&(e=i(e)),s?Reflect.set(r,t,e):o?!1===e||null==e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e):e?r.setAttribute(t,a):r.removeAttribute(t)}))})(i.name,i.value,t,e,r)})),je=(t,e,r)=>{const i=r.nodeValue.split(/(\{\s*[a-zA-Z0-9_.\(\)\,\)]+\s*\})/);if(!(i.length<2)){r.nodeValue="";var o=r.parentElement;i.forEach(((r,i)=>{if(i%2==1){o.insertAdjacentText("beforeend","");let i=o.lastChild;if(Oe(r,t,e,(t=>{i.nodeValue=t})))return}o.insertAdjacentText("beforeend",r)})),o.removeChild(r)}},Ge=(t,e=[])=>{for(const r of t.childNodes)r.nodeType===Node.TEXT_NODE?e.push(r):r.nodeType===Node.ELEMENT_NODE&&Ge(r,e);return e},Ve=(t,e,r)=>{Fe(t,e,r),Ue(t,e,r)},Qe=(t,e,r=!1,i={})=>{let o=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);for(r||Ve(t,e,i);t=o.nextNode();)Ve(t,e,i)},Ze=(t,e,r)=>{Ge(t).forEach(je.bind(null,e,r))},Ke=(t,e,r={})=>{let i=t.querySelectorAll("[repeat]:not([repeat] [repeat])");for(const t of i){let i=t.getAttribute("repeat"),o=t.getAttribute("as"),s=t.getAttribute("index-as");i=i.split(".");let a=i.slice(),l=Re(a,e,r);t.removeAttribute("repeat"),t.removeAttribute("as"),t.removeAttribute("index-as");let c=t.firstElementChild,h=c.cloneNode(!0);t.removeChild(c);let d=[],u=a=>{if(void 0===a&&(a=0),!Number.isInteger(a))return;let l=a-d.length;for(let e=0;e<a&&e<d.length;e++)d[e].isConnected||t.appendChild(d[e]);if(l>0)for(let a=0;a<l;a++){let a=h.cloneNode(!0);t.appendChild(a),d.push(a);const l={...r,[o]:[...i,d.length-1]};l._variables={[s]:d.length-1},Ze(a,e,l),Qe(a,e,!0,l),Ke(a,e,l)}else{const e=d.length+l;for(let r=e;r<d.length;r++)t.removeChild(d[r]);d.splice(e,-l)}};a.push("length"),u(Te(l,a)),Pe(a,u)}};class Component extends HTMLElement{constructor(){if(super(),this.constructor.templateEl){const t=this.attachShadow({mode:"open"});t.appendChild(this.constructor.templateEl.content.cloneNode(!0)),this.constructor.sheets&&this.constructor.sheets.forEach((e=>e.then((e=>t.adoptedStyleSheets.push(e))))),Ke(t,this),Qe(t,this,!0),Ze(t,this)}if(this.constructor.observers)for(const[t,e]of Object.entries(this.constructor.observers))He(t,e)}get state(){return window.state}}const Xe=(t,e)=>{if(e||(e=t.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),t.template&&(t.templateEl=document.createElement("template"),t.templateEl.innerHTML=t.template),t.css){const e=(new CSSStyleSheet).replace(t.css);t.sheets?t.sheets.push(e):t.sheets=[e]}customElements.define(e,t)};function Ye(t,...e){return t.reduce(((t,r,i)=>i<e.length?t+r+e[i]:t+r),"")}const Je=Ye,tr=Ye;var er;const rr="undefined"==typeof window?e.g:window,ir=rr.performance&&(()=>rr.performance.now())||(()=>Date.now()),or=rr.requestAnimationFrame||(t=>setTimeout((()=>t(ir())),1e3/60)),nr=rr.cancelAnimationFrame||clearTimeout;function sr(t){return t[t.length-1]}const ar=(t,e)=>t<0?e+t:t;function lr(t,e){const r={...t};for(const i in e){const o=t[i],s=e[i];o!==s&&(o&&s&&"object"==typeof o&&"object"==typeof s&&!Array.isArray(s)?r[i]=lr(o,s):r[i]=s)}return r}let cr=0;function hr(){return cr++,cr}function dr(t){return t.reduce(((t,e)=>e+t),0)/t.length}function ur(t){const e=t.toUpperCase().trim();if(/^#([A-F0-9]{3}){1,2}$/.test(e)){let t=e.substring(1).split("");3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]);const r=`${t.join("")}`;return{r:parseInt(r.slice(0,2),16),g:parseInt(r.slice(2,4),16),b:parseInt(r.slice(4,6),16),a:1}}const r=e.match(/^RGBA?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d*\.?\d+))?\)$/);if(r)return{r:parseInt(r[1],10),g:parseInt(r[2],10),b:parseInt(r[3],10),a:parseFloat(r[4]||1,10)};throw new Error(`Invalid color: ${t}`)}function pr(t,e){const r={};for(let i=0;i<e;i++)r[i]=t;return r}function mr(t,e){const r={};for(let i=0;i<t;i++)r[i]=e(i);return r}const fr=(null===(er=rr.navigator)||void 0===er?void 0:er.userAgent)||"",vr=fr.indexOf("MSIE ")>0||fr.indexOf("Trident/")>0||fr.indexOf("Edge/")>0,gr=()=>{};class RenderState{constructor(t,e,r=gr){this._mutationChains=[],this._onStateChange=r,this.state={options:{drawingFadeDuration:e.drawingFadeDuration,drawingWidth:e.drawingWidth,drawingColor:ur(e.drawingColor),strokeColor:ur(e.strokeColor),outlineColor:ur(e.outlineColor),radicalColor:ur(e.radicalColor||e.strokeColor),highlightColor:ur(e.highlightColor)},character:{main:{opacity:e.showCharacter?1:0,strokes:{}},outline:{opacity:e.showOutline?1:0,strokes:{}},highlight:{opacity:1,strokes:{}}},userStrokes:null};for(let e=0;e<t.strokes.length;e++)this.state.character.main.strokes[e]={opacity:1,displayPortion:1},this.state.character.outline.strokes[e]={opacity:1,displayPortion:1},this.state.character.highlight.strokes[e]={opacity:0,displayPortion:1}}overwriteOnStateChange(t){this._onStateChange=t}updateState(t){const e=lr(this.state,t);this._onStateChange(e,this.state),this.state=e}run(t,e={}){const r=t.map((t=>t.scope));return this.cancelMutations(r),new Promise((i=>{const o={_isActive:!0,_index:0,_resolve:i,_mutations:t,_loop:e.loop,_scopes:r};this._mutationChains.push(o),this._run(o)}))}_run(t){if(!t._isActive)return;const e=t._mutations;if(t._index>=e.length){if(!t._loop)return t._isActive=!1,this._mutationChains=this._mutationChains.filter((e=>e!==t)),void t._resolve({canceled:!1});t._index=0}t._mutations[t._index].run(this).then((()=>{t._isActive&&(t._index++,this._run(t))}))}_getActiveMutations(){return this._mutationChains.map((t=>t._mutations[t._index]))}pauseAll(){this._getActiveMutations().forEach((t=>t.pause()))}resumeAll(){this._getActiveMutations().forEach((t=>t.resume()))}cancelMutations(t){for(const e of this._mutationChains)for(const r of e._scopes)for(const i of t)(r.startsWith(i)||i.startsWith(r))&&this._cancelMutationChain(e)}cancelAll(){this.cancelMutations([""])}_cancelMutationChain(t){var e;t._isActive=!1;for(let e=t._index;e<t._mutations.length;e++)t._mutations[e].cancel(this);null===(e=t._resolve)||void 0===e||e.call(t,{canceled:!0}),this._mutationChains=this._mutationChains.filter((e=>e!==t))}}const yr=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),br=t=>Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),_r=(t,e)=>br(yr(t,e)),xr=(t,e=1)=>{const r=10*e;return{x:Math.round(r*t.x)/r,y:Math.round(r*t.y)/r}},wr=t=>{let e=t[0];return t.slice(1).reduce(((t,r)=>{const i=_r(r,e);return e=r,t+i}),0)},Cr=(t,e,r)=>{const i=yr(e,t),o=r/br(i);return{x:e.x+o*i.x,y:e.y+o*i.y}},kr=t=>{const e=((t,e=30)=>{const r=wr(t)/(e-1),i=[t[0]],o=sr(t),s=t.slice(1);for(let t=0;t<e-2;t++){let t=sr(i),e=r,o=!1;for(;!o;){const r=_r(t,s[0]);if(r<e)e-=r,t=s.shift();else{const a=Cr(t,s[0],e-r);i.push(a),o=!0}}}return i.push(o),i})(t),r={x:dr(e.map((t=>t.x))),y:dr(e.map((t=>t.y)))},i=e.map((t=>yr(t,r))),o=Math.sqrt(dr([Math.pow(i[0].x,2)+Math.pow(i[0].y,2),Math.pow(sr(i).x,2)+Math.pow(sr(i).y,2)]));return((t,e=.05)=>{const r=t.slice(0,1);for(const i of t.slice(1)){const t=r[r.length-1],o=_r(i,t);if(o>e){const s=Math.ceil(o/e),a=o/s;for(let e=0;e<s;e++)r.push(Cr(i,t,-1*a*(e+1)))}else r.push(i)}return r})(i.map((t=>({x:t.x/o,y:t.y/o}))))};function zr(t,e=!1){const r=xr(t[0]),i=t.slice(1);let o=`M ${r.x} ${r.y}`;return i.forEach((t=>{const e=xr(t);o+=` L ${e.x} ${e.y}`})),e&&(o+="Z"),o}const Sr=(t,e)=>{const r=(t=>{if(t.length<3)return t;const e=[t[0],t[1]];return t.slice(2).forEach((t=>{const r=e.length,i=yr(t,e[r-1]),o=yr(e[r-1],e[r-2]);i.y*o.x-i.x*o.y==0&&e.pop(),e.push(t)})),e})(t);if(r.length<2)return r;const i=r[1],o=r[0],s=Cr(i,o,e),a=r.slice(1);return a.unshift(s),a};class Stroke{constructor(t,e,r,i=!1){this.path=t,this.points=e,this.strokeNum=r,this.isInRadical=i}getStartingPoint(){return this.points[0]}getEndingPoint(){return this.points[this.points.length-1]}getLength(){return wr(this.points)}getVectors(){let t=this.points[0];return this.points.slice(1).map((e=>{const r=yr(e,t);return t=e,r}))}getDistance(t){const e=this.points.map((e=>_r(e,t)));return Math.min(...e)}getAverageDistance(t){return t.reduce(((t,e)=>t+this.getDistance(e)),0)/t.length}}class Character{constructor(t,e){this.symbol=t,this.strokes=e}}function $r({radStrokes:t,strokes:e,medians:r}){return e.map(((e,i)=>{const o=r[i].map((t=>{const[e,r]=t;return{x:e,y:r}}));return new Stroke(e,o,i,(s=i,(null!==(a=null==t?void 0:t.indexOf(s))&&void 0!==a?a:-1)>=0));var s,a}))}const[Ar,Er]=[{x:0,y:-124},{x:1024,y:900}],Tr=Er.x-Ar.x,Mr=Er.y-Ar.y;class Positioner{constructor(t){const{padding:e,width:r,height:i}=t;this.padding=e,this.width=r,this.height=i;const o=r-2*e,s=i-2*e,a=o/Tr,l=s/Mr;this.scale=Math.min(a,l);const c=e+(o-this.scale*Tr)/2,h=e+(s-this.scale*Mr)/2;this.xOffset=-1*Ar.x*this.scale+c,this.yOffset=-1*Ar.y*this.scale+h}convertExternalPoint(t){return{x:(t.x-this.xOffset)/this.scale,y:(this.height-this.yOffset-t.y)/this.scale}}}const Pr=(t,e)=>{const r=(t=>{const e=[];let r=t[0];return t.slice(1).forEach((t=>{e.push(yr(t,r)),r=t})),e})(t),i=e.getVectors();return dr(r.map((t=>{const e=i.map((e=>{return i=t,((r=e).x*i.x+r.y*i.y)/br(r)/br(i);var r,i}));return Math.max(...e)})))>0},Rr=t=>{if(t.length<2)return t;const[e,...r]=t,i=[e];for(const t of r)o=t,s=i[i.length-1],(o.x!==s.x||o.y!==s.y)&&i.push(t);var o,s;return i},Ir=[Math.PI/16,Math.PI/32,0,-1*Math.PI/32,-1*Math.PI/16],Or=(t,e,r)=>{const i=kr(t),o=kr(e);let s=1/0;return Ir.forEach((t=>{const e=((t,e)=>{const r=t.length>=e.length?t:e,i=t.length>=e.length?e:t,o=(t,e,o,s)=>{if(0===t&&0===e)return _r(r[0],i[0]);if(t>0&&0===e)return Math.max(o[0],_r(r[t],i[0]));const a=s[s.length-1];return 0===t&&e>0?Math.max(a,_r(r[0],i[e])):Math.max(Math.min(o[e],o[e-1],a),_r(r[t],i[e]))};let s=[];for(let t=0;t<r.length;t++){const e=[];for(let r=0;r<i.length;r++)e.push(o(t,r,s,e));s=e}return s[i.length-1]})(i,((t,e)=>t.map((t=>({x:Math.cos(e)*t.x-Math.sin(e)*t.y,y:Math.sin(e)*t.x+Math.cos(e)*t.y}))))(o,t));e<s&&(s=e)})),s<=.4*r},Dr=(t,e,r)=>{const{leniency:i=1,isOutlineVisible:o=!1,checkBackwards:s=!0,averageDistanceThreshold:a=350}=r,l=e.getAverageDistance(t),c=l<=a*(o||e.strokeNum>0?.5:1)*i;if(!c)return{isMatch:!1,avgDist:l,meta:{isStrokeBackwards:!1}};const h=((t,e,r)=>{const i=_r(e.getStartingPoint(),t[0]),o=_r(e.getEndingPoint(),t[t.length-1]);return i<=250*r&&o<=250*r})(t,e,i),d=Pr(t,e),u=Or(t,e.points,i),p=((t,e,r)=>r*(wr(t)+25)/(e.getLength()+25)>=.35)(t,e,i),m=c&&h&&d&&u&&p;if(s&&!m){if(Dr([...t].reverse(),e,{...r,checkBackwards:!1}).isMatch)return{isMatch:m,avgDist:l,meta:{isStrokeBackwards:!0}}}return{isMatch:m,avgDist:l,meta:{isStrokeBackwards:!1}}};class UserStroke{constructor(t,e,r){this.id=t,this.points=[e],this.externalPoints=[r]}appendPoint(t,e){this.points.push(t),this.externalPoints.push(e)}}class Mutation{constructor(t,e,r={}){this._tick=t=>{if(null!==this._startPauseTime)return;const e=Math.min(1,(t-this._startTime-this._pausedDuration)/this._duration);if(1===e)this._renderState.updateState(this._values),this._frameHandle=void 0,this.cancel(this._renderState);else{const t=Hr(e),r=Br(this._startState,this._values,t);this._renderState.updateState(r),this._frameHandle=or(this._tick)}},this.scope=t,this._valuesOrCallable=e,this._duration=r.duration||0,this._force=r.force,this._pausedDuration=0,this._startPauseTime=null}run(t){return this._values||this._inflateValues(t),0===this._duration&&t.updateState(this._values),0===this._duration||Lr(t.state,this._values)?Promise.resolve():(this._renderState=t,this._startState=t.state,this._startTime=performance.now(),this._frameHandle=or(this._tick),new Promise((t=>{this._resolve=t})))}_inflateValues(t){let e=this._valuesOrCallable;"function"==typeof this._valuesOrCallable&&(e=this._valuesOrCallable(t.state)),this._values=function(t,e){const r=t.split("."),i={};let o=i;for(let t=0;t<r.length;t++){const i=t===r.length-1?e:{};o[r[t]]=i,o=i}return i}(this.scope,e)}pause(){null===this._startPauseTime&&(this._frameHandle&&nr(this._frameHandle),this._startPauseTime=performance.now())}resume(){null!==this._startPauseTime&&(this._frameHandle=or(this._tick),this._pausedDuration+=performance.now()-this._startPauseTime,this._startPauseTime=null)}cancel(t){var e;null===(e=this._resolve)||void 0===e||e.call(this),this._resolve=void 0,nr(this._frameHandle||-1),this._frameHandle=void 0,this._force&&(this._values||this._inflateValues(t),t.updateState(this._values))}}function Br(t,e,r){const i={};for(const o in e){const s=e[o],a=null==t?void 0:t[o];i[o]="number"==typeof a&&"number"==typeof s&&s>=0?r*(s-a)+a:Br(a,s,r)}return i}function Lr(t,e){for(const r in e){const i=e[r],o=null==t?void 0:t[r];if(i>=0){if(i!==o)return!1}else if(!Lr(o,i))return!1}return!0}Mutation.Delay=class{constructor(t){this._duration=t,this._startTime=null,this._paused=!1,this.scope=`delay.${t}`}run(){return this._startTime=ir(),this._runningPromise=new Promise((t=>{this._resolve=t,this._timeout=setTimeout((()=>this.cancel()),this._duration)})),this._runningPromise}pause(){if(this._paused)return;const t=performance.now()-(this._startTime||0);this._duration=Math.max(0,this._duration-t),clearTimeout(this._timeout),this._paused=!0}resume(){this._paused&&(this._startTime=performance.now(),this._timeout=setTimeout((()=>this.cancel()),this._duration),this._paused=!1)}cancel(){clearTimeout(this._timeout),this._resolve&&this._resolve(),this._resolve=void 0}};const Hr=t=>-Math.cos(t*Math.PI)/2+.5,Nr=(t,e,r)=>[new Mutation(`character.${t}.strokes`,pr({opacity:1,displayPortion:1},e.strokes.length),{duration:r,force:!0})],qr=(t,e,r)=>[new Mutation(`character.${t}`,{opacity:1,strokes:pr({opacity:1,displayPortion:1},e.strokes.length)},{duration:r,force:!0})],Fr=(t,e,r)=>[new Mutation(`character.${t}.opacity`,0,{duration:r,force:!0}),...Nr(t,e,0)],Wr=(t,e,r)=>[new Mutation(`options.${t}`,e,{duration:r})],Ur=(t,e,r)=>{const i=t.strokeNum,o=(t.getLength()+600)/(3*r);return[new Mutation("options.highlightColor",e),new Mutation("character.highlight",{opacity:1,strokes:{[i]:{displayPortion:0,opacity:0}}}),new Mutation(`character.highlight.strokes.${i}`,{displayPortion:1,opacity:1},{duration:o}),new Mutation(`character.highlight.strokes.${i}.opacity`,0,{duration:o,force:!0})]},jr=(t,e,r)=>{const i=e.strokeNum,o=(e.getLength()+600)/(3*r);return[new Mutation(`character.${t}`,{opacity:1,strokes:{[i]:{displayPortion:0,opacity:1}}}),new Mutation(`character.${t}.strokes.${i}.displayPortion`,1,{duration:o})]},Gr=(t,e,r,i,o)=>{let s=Fr(t,e,r);return s=s.concat(Nr(t,e,0)),s.push(new Mutation(`character.${t}`,{opacity:1,strokes:pr({opacity:0},e.strokes.length)},{force:!0})),e.strokes.forEach(((e,r)=>{r>0&&s.push(new Mutation.Delay(o)),s=s.concat(jr(t,e,i))})),s},Vr=(t,e)=>[new Mutation(`userStrokes.${t}.opacity`,0,{duration:e}),new Mutation(`userStrokes.${t}`,null,{force:!0})];class Quiz{constructor(t,e,r){this._currentStrokeIndex=0,this._mistakesOnStroke=0,this._totalMistakes=0,this._character=t,this._renderState=e,this._isActive=!1,this._positioner=r}startQuiz(t){this._isActive=!0,this._options=t;const e=ar(t.quizStartStrokeNum,this._character.strokes.length);return this._currentStrokeIndex=Math.min(e,this._character.strokes.length-1),this._mistakesOnStroke=0,this._totalMistakes=0,this._renderState.run((r=this._character,i=t.strokeFadeDuration,o=this._currentStrokeIndex,[...Fr("main",r,i),new Mutation("character.highlight",{opacity:1,strokes:pr({opacity:0},r.strokes.length)},{force:!0}),new Mutation("character.main",{opacity:1,strokes:mr(r.strokes.length,(t=>({opacity:t<o?1:0})))},{force:!0})]));var r,i,o}startUserStroke(t){if(!this._isActive)return null;if(this._userStroke)return this.endUserStroke();const e=this._positioner.convertExternalPoint(t),r=hr();return this._userStroke=new UserStroke(r,e,t),this._renderState.run(((t,e)=>[new Mutation("quiz.activeUserStrokeId",t,{force:!0}),new Mutation(`userStrokes.${t}`,{points:[e],opacity:1},{force:!0})])(r,e))}continueUserStroke(t){if(!this._userStroke)return Promise.resolve();const e=this._positioner.convertExternalPoint(t);this._userStroke.appendPoint(e,t);const r=this._userStroke.points.slice(0);return this._renderState.run((i=this._userStroke.id,[new Mutation(`userStrokes.${i}.points`,r,{force:!0})]));var i}setPositioner(t){this._positioner=t}endUserStroke(){var t;if(!this._userStroke)return;if(this._renderState.run(Vr(this._userStroke.id,null!==(t=this._options.drawingFadeDuration)&&void 0!==t?t:300)),1===this._userStroke.points.length)return void(this._userStroke=void 0);const{acceptBackwardsStrokes:e,markStrokeCorrectAfterMisses:r}=this._options,i=this._getCurrentStroke(),{isMatch:o,meta:s}=function(t,e,r,i={}){const o=e.strokes,s=Rr(t.points);if(s.length<2)return{isMatch:!1,meta:{isStrokeBackwards:!1}};const{isMatch:a,meta:l,avgDist:c}=Dr(s,o[r],i);if(!a)return{isMatch:a,meta:l};const h=o.slice(r+1);let d=c;for(let t=0;t<h.length;t++){const{isMatch:e,avgDist:r}=Dr(s,h[t],{...i,checkBackwards:!1});e&&r<d&&(d=r)}if(d<c){const t=.6*(d+c)/(2*c),{isMatch:e,meta:a}=Dr(s,o[r],{...i,leniency:(i.leniency||1)*t});return{isMatch:e,meta:a}}return{isMatch:a,meta:l}}(this._userStroke,this._character,this._currentStrokeIndex,{isOutlineVisible:this._renderState.state.character.outline.opacity>0,leniency:this._options.leniency,averageDistanceThreshold:this._options.averageDistanceThreshold}),a=r&&this._mistakesOnStroke+1>=r;if(o||a||s.isStrokeBackwards&&e)this._handleSuccess(s);else{this._handleFailure(s);const{showHintAfterMisses:t,highlightColor:e,strokeHighlightSpeed:r}=this._options;!1!==t&&this._mistakesOnStroke>=t&&this._renderState.run(Ur(i,ur(e),r))}this._userStroke=void 0}cancel(){this._isActive=!1,this._userStroke&&this._renderState.run(Vr(this._userStroke.id,this._options.drawingFadeDuration))}_getStrokeData({isCorrect:t,meta:e}){return{character:this._character.symbol,strokeNum:this._currentStrokeIndex,mistakesOnStroke:this._mistakesOnStroke,totalMistakes:this._totalMistakes,strokesRemaining:this._character.strokes.length-this._currentStrokeIndex-(t?1:0),drawnPath:(r=this._userStroke,{pathString:zr(r.externalPoints),points:r.points.map((t=>xr(t)))}),isBackwards:e.isStrokeBackwards};var r}_handleSuccess(t){if(!this._options)return;const{strokes:e,symbol:r}=this._character,{onCorrectStroke:i,onComplete:o,highlightOnComplete:s,strokeFadeDuration:a,highlightCompleteColor:l,highlightColor:c,strokeHighlightDuration:h}=this._options;null==i||i({...this._getStrokeData({isCorrect:!0,meta:t})});let d=(u="main",p=this._currentStrokeIndex,[new Mutation(`character.${u}.strokes.${p}`,{displayPortion:1,opacity:1},{duration:a,force:!0})]);var u,p;this._mistakesOnStroke=0,this._currentStrokeIndex+=1;this._currentStrokeIndex===e.length&&(this._isActive=!1,null==o||o({character:r,totalMistakes:this._totalMistakes}),s&&(d=d.concat(((t,e,r)=>[new Mutation("options.highlightColor",e),...Fr("highlight",t),...qr("highlight",t,r/2),...Fr("highlight",t,r/2)])(this._character,ur(l||c),2*(h||0))))),this._renderState.run(d)}_handleFailure(t){var e,r;this._mistakesOnStroke+=1,this._totalMistakes+=1,null===(e=(r=this._options).onMistake)||void 0===e||e.call(r,this._getStrokeData({isCorrect:!1,meta:t}))}_getCurrentStroke(){return this._character.strokes[this._currentStrokeIndex]}}function Qr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Zr(t,e,r){t.setAttributeNS(null,e,r)}function Kr(t,e){Object.keys(e).forEach((r=>Zr(t,r,e[r])))}function Xr(t){var e;null==t||null===(e=t.parentNode)||void 0===e||e.removeChild(t)}class StrokeRendererBase{constructor(t){this.stroke=t,this._pathLength=t.getLength()+StrokeRendererBase.STROKE_WIDTH/2}_getStrokeDashoffset(t){return.999*this._pathLength*(1-t)}_getColor({strokeColor:t,radicalColor:e}){return e&&this.stroke.isInRadical?e:t}}StrokeRendererBase.STROKE_WIDTH=200;class StrokeRenderer extends StrokeRendererBase{constructor(t){super(t),this._oldProps=void 0}mount(t){this._animationPath=Qr("path"),this._clip=Qr("clipPath"),this._strokePath=Qr("path");const e=`mask-${hr()}`;Zr(this._clip,"id",e),Zr(this._strokePath,"d",this.stroke.path),this._animationPath.style.opacity="0",Zr(this._animationPath,"clip-path",function(t){let e="";return window.location&&window.location.href&&(e=window.location.href.replace(/#[^#]*$/,"").replace(/"/gi,"%22")),`url("${e}#${t}")`}(e));const r=Sr(this.stroke.points,100);return Zr(this._animationPath,"d",zr(r)),Kr(this._animationPath,{stroke:"#FFFFFF","stroke-width":200..toString(),fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":`${this._pathLength},${this._pathLength}`}),this._clip.appendChild(this._strokePath),t.defs.appendChild(this._clip),t.svg.appendChild(this._animationPath),this}render(t){var e,r;if(t===this._oldProps||!this._animationPath)return;t.displayPortion!==(null===(e=this._oldProps)||void 0===e?void 0:e.displayPortion)&&(this._animationPath.style.strokeDashoffset=this._getStrokeDashoffset(t.displayPortion).toString());const i=this._getColor(t);if(!this._oldProps||i!==this._getColor(this._oldProps)){const{r:t,g:e,b:r,a:o}=i;Kr(this._animationPath,{stroke:`rgba(${t},${e},${r},${o})`})}t.opacity!==(null===(r=this._oldProps)||void 0===r?void 0:r.opacity)&&(this._animationPath.style.opacity=t.opacity.toString()),this._oldProps=t}}class CharacterRenderer{constructor(t){this._oldProps=void 0,this._strokeRenderers=t.strokes.map((t=>new StrokeRenderer(t)))}mount(t){const e=t.createSubRenderTarget();this._group=e.svg,this._strokeRenderers.forEach((t=>{t.mount(e)}))}render(t){var e,r;if(t===this._oldProps||!this._group)return;const{opacity:i,strokes:o,strokeColor:s,radicalColor:a=null}=t;var l;i!==(null===(e=this._oldProps)||void 0===e?void 0:e.opacity)&&(this._group.style.opacity=i.toString(),vr||(0===i?this._group.style.display="none":0===(null===(l=this._oldProps)||void 0===l?void 0:l.opacity)&&this._group.style.removeProperty("display")));const c=!this._oldProps||s!==this._oldProps.strokeColor||a!==this._oldProps.radicalColor;if(c||o!==(null===(r=this._oldProps)||void 0===r?void 0:r.strokes))for(let t=0;t<this._strokeRenderers.length;t++){var h;!c&&null!==(h=this._oldProps)&&void 0!==h&&h.strokes&&o[t]===this._oldProps.strokes[t]||this._strokeRenderers[t].render({strokeColor:s,radicalColor:a,opacity:o[t].opacity,displayPortion:o[t].displayPortion})}this._oldProps=t}}class UserStrokeRenderer{constructor(){this._oldProps=void 0}mount(t){this._path=Qr("path"),t.svg.appendChild(this._path)}render(t){var e,r,i,o;if(this._path&&t!==this._oldProps){if(t.strokeColor!==(null===(e=this._oldProps)||void 0===e?void 0:e.strokeColor)||t.strokeWidth!==(null===(r=this._oldProps)||void 0===r?void 0:r.strokeWidth)){const{r:e,g:r,b:i,a:o}=t.strokeColor;Kr(this._path,{fill:"none",stroke:`rgba(${e},${r},${i},${o})`,"stroke-width":t.strokeWidth.toString(),"stroke-linecap":"round","stroke-linejoin":"round"})}t.opacity!==(null===(i=this._oldProps)||void 0===i?void 0:i.opacity)&&Zr(this._path,"opacity",t.opacity.toString()),t.points!==(null===(o=this._oldProps)||void 0===o?void 0:o.points)&&Zr(this._path,"d",zr(t.points)),this._oldProps=t}}destroy(){Xr(this._path)}}class RenderTargetBase{constructor(t){this.node=t}addPointerStartListener(t){this.node.addEventListener("mousedown",(e=>{t(this._eventify(e,this._getMousePoint))})),this.node.addEventListener("touchstart",(e=>{t(this._eventify(e,this._getTouchPoint))}))}addPointerMoveListener(t){this.node.addEventListener("mousemove",(e=>{t(this._eventify(e,this._getMousePoint))})),this.node.addEventListener("touchmove",(e=>{t(this._eventify(e,this._getTouchPoint))}))}addPointerEndListener(t){document.addEventListener("mouseup",t),document.addEventListener("touchend",t)}getBoundingClientRect(){return this.node.getBoundingClientRect()}updateDimensions(t,e){this.node.setAttribute("width",`${t}`),this.node.setAttribute("height",`${e}`)}_eventify(t,e){return{getPoint:()=>e.call(this,t),preventDefault:()=>t.preventDefault()}}_getMousePoint(t){const{left:e,top:r}=this.getBoundingClientRect();return{x:t.clientX-e,y:t.clientY-r}}_getTouchPoint(t){const{left:e,top:r}=this.getBoundingClientRect();return{x:t.touches[0].clientX-e,y:t.touches[0].clientY-r}}}class RenderTarget extends RenderTargetBase{constructor(t,e){super(t),this.svg=t,this.defs=e,"createSVGPoint"in t&&(this._pt=t.createSVGPoint())}static init(t,e="100%",r="100%"){const i="string"==typeof t?document.getElementById(t):t;if(!i)throw new Error(`HanziWriter target element not found: ${t}`);const o=i.nodeName.toUpperCase(),s=(()=>{if("SVG"===o||"G"===o)return i;{const t=Qr("svg");return i.appendChild(t),t}})();Kr(s,{width:e,height:r});const a=Qr("defs");return s.appendChild(a),new RenderTarget(s,a)}createSubRenderTarget(){const t=Qr("g");return this.svg.appendChild(t),new RenderTarget(t,this.defs)}_getMousePoint(t){if(this._pt&&(this._pt.x=t.clientX,this._pt.y=t.clientY,"getScreenCTM"in this.node)){var e;const t=this._pt.matrixTransform(null===(e=this.node.getScreenCTM())||void 0===e?void 0:e.inverse());return{x:t.x,y:t.y}}return super._getMousePoint.call(this,t)}_getTouchPoint(t){if(this._pt&&(this._pt.x=t.touches[0].clientX,this._pt.y=t.touches[0].clientY,"getScreenCTM"in this.node)){var e;const t=this._pt.matrixTransform(null===(e=this.node.getScreenCTM())||void 0===e?void 0:e.inverse());return{x:t.x,y:t.y}}return super._getTouchPoint(t)}}var Yr={HanziWriterRenderer:class{constructor(t,e){this._character=t,this._positioner=e,this._mainCharRenderer=new CharacterRenderer(t),this._outlineCharRenderer=new CharacterRenderer(t),this._highlightCharRenderer=new CharacterRenderer(t),this._userStrokeRenderers={}}mount(t){const e=t.createSubRenderTarget(),r=e.svg,{xOffset:i,yOffset:o,height:s,scale:a}=this._positioner;Zr(r,"transform",`translate(${i}, ${s-o}) scale(${a}, ${-1*a})`),this._outlineCharRenderer.mount(e),this._mainCharRenderer.mount(e),this._highlightCharRenderer.mount(e),this._positionedTarget=e}render(t){const{main:e,outline:r,highlight:i}=t.character,{outlineColor:o,radicalColor:s,highlightColor:a,strokeColor:l,drawingWidth:c,drawingColor:h}=t.options;this._outlineCharRenderer.render({opacity:r.opacity,strokes:r.strokes,strokeColor:o}),this._mainCharRenderer.render({opacity:e.opacity,strokes:e.strokes,strokeColor:l,radicalColor:s}),this._highlightCharRenderer.render({opacity:i.opacity,strokes:i.strokes,strokeColor:a});const d=t.userStrokes||{};for(const t in this._userStrokeRenderers){var u;if(!d[t])null===(u=this._userStrokeRenderers[t])||void 0===u||u.destroy(),delete this._userStrokeRenderers[t]}for(const t in d){const e=d[t];if(!e)continue;const r={strokeWidth:c,strokeColor:h,...e};(()=>{if(this._userStrokeRenderers[t])return this._userStrokeRenderers[t];const e=new UserStrokeRenderer;return e.mount(this._positionedTarget),this._userStrokeRenderers[t]=e,e})().render(r)}}destroy(){Xr(this._positionedTarget.svg),this._positionedTarget.defs.innerHTML=""}},createRenderTarget:RenderTarget.init};const Jr=(t,e)=>{t.beginPath();const r=e[0],i=e.slice(1);t.moveTo(r.x,r.y);for(const e of i)t.lineTo(e.x,e.y);t.stroke()};class StrokeRenderer$1 extends StrokeRendererBase{constructor(t,e=!0){super(t),e&&Path2D?this._path2D=new Path2D(this.stroke.path):this._pathCmd=(t=>{const e=t.split(/(^|\s+)(?=[A-Z])/).filter((t=>" "!==t)),r=[t=>t.beginPath()];for(const t of e){const[e,...i]=t.split(/\s+/),o=i.map((t=>parseFloat(t)));"M"===e?r.push((t=>t.moveTo(...o))):"L"===e?r.push((t=>t.lineTo(...o))):"C"===e?r.push((t=>t.bezierCurveTo(...o))):"Q"===e&&r.push((t=>t.quadraticCurveTo(...o)))}return t=>r.forEach((e=>e(t)))})(this.stroke.path),this._extendedMaskPoints=Sr(this.stroke.points,StrokeRendererBase.STROKE_WIDTH/2)}render(t,e){if(e.opacity<.05)return;var r;(t.save(),this._path2D)?t.clip(this._path2D):(null===(r=this._pathCmd)||void 0===r||r.call(this,t),t.globalAlpha=0,t.stroke(),t.clip());const{r:i,g:o,b:s,a}=this._getColor(e),l=1===a?`rgb(${i},${o},${s})`:`rgb(${i},${o},${s},${a})`,c=this._getStrokeDashoffset(e.displayPortion);t.globalAlpha=e.opacity,t.strokeStyle=l,t.fillStyle=l,t.lineWidth=StrokeRendererBase.STROKE_WIDTH,t.lineCap="round",t.lineJoin="round",t.setLineDash([this._pathLength,this._pathLength],c),t.lineDashOffset=c,Jr(t,this._extendedMaskPoints),t.restore()}}class CharacterRenderer$1{constructor(t){this._strokeRenderers=t.strokes.map((t=>new StrokeRenderer$1(t)))}render(t,e){if(e.opacity<.05)return;const{opacity:r,strokeColor:i,radicalColor:o,strokes:s}=e;for(let e=0;e<this._strokeRenderers.length;e++)this._strokeRenderers[e].render(t,{strokeColor:i,radicalColor:o,opacity:s[e].opacity*r,displayPortion:s[e].displayPortion||0})}}function ti(t,e){if(e.opacity<.05)return;const{opacity:r,strokeWidth:i,strokeColor:o,points:s}=e,{r:a,g:l,b:c,a:h}=o;t.save(),t.globalAlpha=r,t.lineWidth=i,t.strokeStyle=`rgba(${a},${l},${c},${h})`,t.lineCap="round",t.lineJoin="round",Jr(t,s),t.restore()}class RenderTarget$1 extends RenderTargetBase{constructor(t){super(t)}static init(t,e="100%",r="100%"){const i="string"==typeof t?document.getElementById(t):t;if(!i)throw new Error(`HanziWriter target element not found: ${t}`);const o=i.nodeName.toUpperCase(),s=(()=>{if("CANVAS"===o)return i;const t=document.createElement("canvas");return i.appendChild(t),t})();return s.setAttribute("width",e),s.setAttribute("height",r),new RenderTarget$1(s)}getContext(){return this.node.getContext("2d")}}var ei={HanziWriterRenderer:class{constructor(t,e){this.destroy=gr,this._character=t,this._positioner=e,this._mainCharRenderer=new CharacterRenderer$1(t),this._outlineCharRenderer=new CharacterRenderer$1(t),this._highlightCharRenderer=new CharacterRenderer$1(t)}mount(t){this._target=t}_animationFrame(t){const{width:e,height:r,scale:i,xOffset:o,yOffset:s}=this._positioner,a=this._target.getContext();a.clearRect(0,0,e,r),a.save(),a.translate(o,r-s),a.transform(1,0,0,-1,0,0),a.scale(i,i),t(a),a.restore(),a.draw&&a.draw()}render(t){const{outline:e,main:r,highlight:i}=t.character,{outlineColor:o,strokeColor:s,radicalColor:a,highlightColor:l,drawingColor:c,drawingWidth:h}=t.options;this._animationFrame((d=>{this._outlineCharRenderer.render(d,{opacity:e.opacity,strokes:e.strokes,strokeColor:o}),this._mainCharRenderer.render(d,{opacity:r.opacity,strokes:r.strokes,strokeColor:s,radicalColor:a}),this._highlightCharRenderer.render(d,{opacity:i.opacity,strokes:i.strokes,strokeColor:l});const u=t.userStrokes||{};for(const t in u){const e=u[t];if(e){ti(d,{strokeWidth:h,strokeColor:c,...e})}}}))}},createRenderTarget:RenderTarget$1.init};const ri={charDataLoader:(t,e,r)=>{const i=new XMLHttpRequest;i.overrideMimeType&&i.overrideMimeType("application/json"),i.open("GET",(t=>`https://cdn.jsdelivr.net/npm/hanzi-writer-data@2.0/${t}.json`)(t),!0),i.onerror=t=>{r(i,t)},i.onreadystatechange=()=>{4===i.readyState&&(200===i.status?e(JSON.parse(i.responseText)):0!==i.status&&r&&r(i))},i.send(null)},onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,renderer:"svg",width:0,height:0,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",leniency:1,showHintAfterMisses:3,highlightOnComplete:!0,highlightCompleteColor:null,markStrokeCorrectAfterMisses:!1,acceptBackwardsStrokes:!1,quizStartStrokeNum:0,averageDistanceThreshold:350,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2,rendererOverride:{}};class LoadingManager{constructor(t){this._loadCounter=0,this._isLoading=!1,this.loadingFailed=!1,this._options=t}_debouncedLoad(t,e){const r=t=>{var r;e===this._loadCounter&&(null===(r=this._resolve)||void 0===r||r.call(this,t))},i=t=>{var r;e===this._loadCounter&&(null===(r=this._reject)||void 0===r||r.call(this,t))},o=this._options.charDataLoader(t,r,i);o&&("then"in o?o.then(r).catch(i):r(o))}_setupLoadingPromise(){return new Promise(((t,e)=>{this._resolve=t,this._reject=e})).then((t=>{var e,r;return this._isLoading=!1,null===(e=(r=this._options).onLoadCharDataSuccess)||void 0===e||e.call(r,t),t})).catch((t=>{if(this._isLoading=!1,this.loadingFailed=!0,this._options.onLoadCharDataError)return void this._options.onLoadCharDataError(t);if(t instanceof Error)throw t;const e=new Error(`Failed to load char data for ${this._loadingChar}`);throw e.reason=t,e}))}loadCharData(t){this._loadingChar=t;const e=this._setupLoadingPromise();return this.loadingFailed=!1,this._isLoading=!0,this._loadCounter++,this._debouncedLoad(t,this._loadCounter),e}}class HanziWriter{constructor(t,e={}){const{HanziWriterRenderer:r,createRenderTarget:i}="canvas"===e.renderer?ei:Yr,o=e.rendererOverride||{};this._renderer={HanziWriterRenderer:o.HanziWriterRenderer||r,createRenderTarget:o.createRenderTarget||i},this.target=this._renderer.createRenderTarget(t,e.width,e.height),this._options=this._assignOptions(e),this._loadingManager=new LoadingManager(this._options),this._setupListeners()}static create(t,e,r){const i=new HanziWriter(t,r);return i.setCharacter(e),i}static loadCharacterData(t,e={}){const r=(()=>{const{_loadingManager:r,_loadingOptions:i}=HanziWriter;return(null==r?void 0:r._loadingChar)===t&&i===e?r:new LoadingManager({...ri,...e})})();return HanziWriter._loadingManager=r,HanziWriter._loadingOptions=e,r.loadCharData(t)}static getScalingTransform(t,e,r=0){const i=new Positioner({width:t,height:e,padding:r});return{x:i.xOffset,y:i.yOffset,scale:i.scale,transform:(o=`\n        translate(${i.xOffset}, ${i.height-i.yOffset})\n        scale(${i.scale}, ${-1*i.scale})\n      `,o.replace(/^\s+/,"").replace(/\s+$/,"")).replace(/\s+/g," ")};var o}showCharacter(t={}){return this._options.showCharacter=!0,this._withData((()=>{var e;return null===(e=this._renderState)||void 0===e?void 0:e.run(qr("main",this._character,"number"==typeof t.duration?t.duration:this._options.strokeFadeDuration)).then((e=>{var r;return null===(r=t.onComplete)||void 0===r||r.call(t,e),e}))}))}hideCharacter(t={}){return this._options.showCharacter=!1,this._withData((()=>{var e;return null===(e=this._renderState)||void 0===e?void 0:e.run(Fr("main",this._character,"number"==typeof t.duration?t.duration:this._options.strokeFadeDuration)).then((e=>{var r;return null===(r=t.onComplete)||void 0===r||r.call(t,e),e}))}))}animateCharacter(t={}){return this.cancelQuiz(),this._withData((()=>{var e;return null===(e=this._renderState)||void 0===e?void 0:e.run(Gr("main",this._character,this._options.strokeFadeDuration,this._options.strokeAnimationSpeed,this._options.delayBetweenStrokes)).then((e=>{var r;return null===(r=t.onComplete)||void 0===r||r.call(t,e),e}))}))}animateStroke(t,e={}){return this.cancelQuiz(),this._withData((()=>{var r;return null===(r=this._renderState)||void 0===r?void 0:r.run(((t,e,r,i)=>{const o=e.strokes[r];return[new Mutation(`character.${t}`,(r=>{const i=r.character[t],o={opacity:1,strokes:{}};for(let t=0;t<e.strokes.length;t++)o.strokes[t]={opacity:i.opacity*i.strokes[t].opacity};return o})),...jr(t,o,i)]})("main",this._character,ar(t,this._character.strokes.length),this._options.strokeAnimationSpeed)).then((t=>{var r;return null===(r=e.onComplete)||void 0===r||r.call(e,t),t}))}))}highlightStroke(t,e={}){return this._withData((()=>{var r,i;if(this._character&&this._renderState)return this._renderState.run(Ur((r=this._character.strokes,i=t,r[ar(i,r.length)]),ur(this._options.highlightColor),this._options.strokeHighlightSpeed)).then((t=>{var r;return null===(r=e.onComplete)||void 0===r||r.call(e,t),t}))}))}async loopCharacterAnimation(){return this.cancelQuiz(),this._withData((()=>this._renderState.run(((t,e,r,i,o,s)=>{const a=Gr(t,e,r,i,o);return a.push(new Mutation.Delay(s)),a})("main",this._character,this._options.strokeFadeDuration,this._options.strokeAnimationSpeed,this._options.delayBetweenStrokes,this._options.delayBetweenLoops),{loop:!0})))}pauseAnimation(){return this._withData((()=>{var t;return null===(t=this._renderState)||void 0===t?void 0:t.pauseAll()}))}resumeAnimation(){return this._withData((()=>{var t;return null===(t=this._renderState)||void 0===t?void 0:t.resumeAll()}))}showOutline(t={}){return this._options.showOutline=!0,this._withData((()=>{var e;return null===(e=this._renderState)||void 0===e?void 0:e.run(qr("outline",this._character,"number"==typeof t.duration?t.duration:this._options.strokeFadeDuration)).then((e=>{var r;return null===(r=t.onComplete)||void 0===r||r.call(t,e),e}))}))}hideOutline(t={}){return this._options.showOutline=!1,this._withData((()=>{var e;return null===(e=this._renderState)||void 0===e?void 0:e.run(Fr("outline",this._character,"number"==typeof t.duration?t.duration:this._options.strokeFadeDuration)).then((e=>{var r;return null===(r=t.onComplete)||void 0===r||r.call(t,e),e}))}))}updateDimensions({width:t,height:e,padding:r}){if(void 0!==t&&(this._options.width=t),void 0!==e&&(this._options.height=e),void 0!==r&&(this._options.padding=r),this.target.updateDimensions(this._options.width,this._options.height),this._character&&this._renderState&&this._hanziWriterRenderer&&this._positioner){this._hanziWriterRenderer.destroy();const t=this._initAndMountHanziWriterRenderer(this._character);this._renderState.overwriteOnStateChange((e=>t.render(e))),t.render(this._renderState.state),this._quiz&&this._quiz.setPositioner(this._positioner)}}updateColor(t,e,r={}){var i;let o=[];const s=ur((()=>"radicalColor"!==t||e?e:this._options.strokeColor)());this._options[t]=e;const a=null!==(i=r.duration)&&void 0!==i?i:this._options.strokeFadeDuration;return o=o.concat(Wr(t,s,a)),"radicalColor"!==t||e||(o=o.concat(Wr(t,null,0))),this._withData((()=>{var t;return null===(t=this._renderState)||void 0===t?void 0:t.run(o).then((t=>{var e;return null===(e=r.onComplete)||void 0===e||e.call(r,t),t}))}))}quiz(t={}){return this._withData((async()=>{this._character&&this._renderState&&this._positioner&&(this.cancelQuiz(),this._quiz=new Quiz(this._character,this._renderState,this._positioner),this._options={...this._options,...t},this._quiz.startQuiz(this._options))}))}cancelQuiz(){this._quiz&&(this._quiz.cancel(),this._quiz=void 0)}setCharacter(t){return this.cancelQuiz(),this._char=t,this._hanziWriterRenderer&&this._hanziWriterRenderer.destroy(),this._renderState&&this._renderState.cancelAll(),this._hanziWriterRenderer=null,this._withDataPromise=this._loadingManager.loadCharData(t).then((e=>{if(!e||this._loadingManager.loadingFailed)return;this._character=function(t,e){const r=$r(e);return new Character(t,r)}(t,e),this._renderState=new RenderState(this._character,this._options,(t=>r.render(t)));const r=this._initAndMountHanziWriterRenderer(this._character);r.render(this._renderState.state)})),this._withDataPromise}_initAndMountHanziWriterRenderer(t){const{width:e,height:r,padding:i}=this._options;this._positioner=new Positioner({width:e,height:r,padding:i});const o=new this._renderer.HanziWriterRenderer(t,this._positioner);return o.mount(this.target),this._hanziWriterRenderer=o,o}async getCharacterData(){if(!this._char)throw new Error("setCharacter() must be called before calling getCharacterData()");return await this._withData((()=>this._character))}_assignOptions(t){const e={...ri,...t};return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(e.strokeAnimationSpeed=500/t.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(e.strokeHighlightSpeed=500/e.strokeHighlightDuration),t.highlightCompleteColor||(e.highlightCompleteColor=e.highlightColor),this._fillWidthAndHeight(e)}_fillWidthAndHeight(t){const e={...t};if(e.width&&!e.height)e.height=e.width;else if(e.height&&!e.width)e.width=e.height;else if(!e.width&&!e.height){const{width:t,height:r}=this.target.getBoundingClientRect(),i=Math.min(t,r);e.width=i,e.height=i}return e}_withData(t){if(this._loadingManager.loadingFailed)throw Error("Failed to load character data. Call setCharacter and try again.");return this._withDataPromise?this._withDataPromise.then((()=>{if(!this._loadingManager.loadingFailed)return t()})):Promise.resolve().then(t)}_setupListeners(){this.target.addPointerStartListener((t=>{this._quiz&&(t.preventDefault(),this._quiz.startUserStroke(t.getPoint()))})),this.target.addPointerMoveListener((t=>{this._quiz&&(t.preventDefault(),this._quiz.continueUserStroke(t.getPoint()))})),this.target.addPointerEndListener((()=>{var t;null===(t=this._quiz)||void 0===t||t.endUserStroke()}))}}HanziWriter._loadingManager=null,HanziWriter._loadingOptions=null;const ii=HanziWriter;var oi;let ni;!function(t){t[t.Desktop=0]="Desktop",t[t.Android=1]="Android",t[t.Web=2]="Web"}(oi||(oi={})),ni="undefined"!=typeof pycmd?oi.Desktop:"undefined"!=typeof AnkiDroidJS?oi.Android:oi.Web;const si=t=>fetch(`${ni===oi.Desktop||ni===oi.Android?"":"."}/${t}`),{abs:ai,cos:li,sin:ci,acos:hi,atan2:di,sqrt:ui,pow:pi}=Math;function mi(t){return t<0?-pi(-t,1/3):pi(t,1/3)}const fi=Math.PI,vi=2*fi,gi=fi/2,yi=Number.MAX_SAFE_INTEGER||9007199254740991,bi=Number.MIN_SAFE_INTEGER||-9007199254740991,_i={x:0,y:0,z:0},xi={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){const r=e(t);let i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),ui(i)},compute:function(t,e,r){if(0===t)return e[0].t=0,e[0];const i=e.length-1;if(1===t)return e[i].t=1,e[i];const o=1-t;let s=e;if(0===i)return e[0].t=t,e[0];if(1===i){const e={x:o*s[0].x+t*s[1].x,y:o*s[0].y+t*s[1].y,t};return r&&(e.z=o*s[0].z+t*s[1].z),e}if(i<4){let e,a,l,c=o*o,h=t*t,d=0;2===i?(s=[s[0],s[1],s[2],_i],e=c,a=o*t*2,l=h):3===i&&(e=c*o,a=c*t*3,l=o*h*3,d=t*h);const u={x:e*s[0].x+a*s[1].x+l*s[2].x+d*s[3].x,y:e*s[0].y+a*s[1].y+l*s[2].y+d*s[3].y,t};return r&&(u.z=e*s[0].z+a*s[1].z+l*s[2].z+d*s[3].z),u}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let e=0;e<a.length-1;e++)a[e]={x:a[e].x+(a[e+1].x-a[e].x)*t,y:a[e].y+(a[e+1].y-a[e].y)*t},void 0!==a[e].z&&(a[e].z=a[e].z+(a[e+1].z-a[e].z)*t);a.splice(a.length-1,1)}return a[0].t=t,a[0]},computeWithRatios:function(t,e,r,i){const o=1-t,s=r,a=e;let l,c=s[0],h=s[1],d=s[2],u=s[3];return c*=o,h*=t,2===a.length?(l=c+h,{x:(c*a[0].x+h*a[1].x)/l,y:(c*a[0].y+h*a[1].y)/l,z:!!i&&(c*a[0].z+h*a[1].z)/l,t}):(c*=o,h*=2*o,d*=t*t,3===a.length?(l=c+h+d,{x:(c*a[0].x+h*a[1].x+d*a[2].x)/l,y:(c*a[0].y+h*a[1].y+d*a[2].y)/l,z:!!i&&(c*a[0].z+h*a[1].z+d*a[2].z)/l,t}):(c*=o,h*=1.5*o,d*=3*o,u*=t*t*t,4===a.length?(l=c+h+d+u,{x:(c*a[0].x+h*a[1].x+d*a[2].x+u*a[3].x)/l,y:(c*a[0].y+h*a[1].y+d*a[2].y+u*a[3].y)/l,z:!!i&&(c*a[0].z+h*a[1].z+d*a[2].z+u*a[3].z)/l,t}):void 0))},derive:function(t,e){const r=[];for(let i=t,o=i.length,s=o-1;o>1;o--,s--){const t=[];for(let r,o=0;o<s;o++)r={x:s*(i[o+1].x-i[o].x),y:s*(i[o+1].y-i[o].y)},e&&(r.z=s*(i[o+1].z-i[o].z)),t.push(r);r.push(t),i=t}return r},between:function(t,e,r){return e<=t&&t<=r||xi.approximately(t,e)||xi.approximately(t,r)},approximately:function(t,e,r){return ai(t-e)<=(r||1e-6)},length:function(t){const e=xi.Tvalues.length;let r=0;for(let i,o=0;o<e;o++)i=.5*xi.Tvalues[o]+.5,r+=xi.Cvalues[o]*xi.arcfn(i,t);return.5*r},map:function(t,e,r,i,o){return i+(o-i)*((t-e)/(r-e))},lerp:function(t,e,r){const i={x:e.x+t*(r.x-e.x),y:e.y+t*(r.y-e.y)};return void 0!==e.z&&void 0!==r.z&&(i.z=e.z+t*(r.z-e.z)),i},pointToString:function(t){let e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(xi.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,r){const i=e.x-t.x,o=e.y-t.y,s=r.x-t.x,a=r.y-t.y;return di(i*a-o*s,i*s+o*a)},round:function(t,e){const r=""+t,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(t,e){const r=t.x-e.x,i=t.y-e.y;return ui(r*r+i*i)},closest:function(t,e){let r,i,o=pi(2,63);return t.forEach((function(t,s){i=xi.dist(e,t),i<o&&(o=i,r=s)})),{mdist:o,mpos:r}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const r=pi(t,e)+pi(1-t,e);return ai((r-1)/r)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const r=pi(1-t,e);return r/(pi(t,e)+r)},lli8:function(t,e,r,i,o,s,a,l){const c=(t-r)*(s-l)-(e-i)*(o-a);return 0!=c&&{x:((t*i-e*r)*(o-a)-(t-r)*(o*l-s*a))/c,y:((t*i-e*r)*(s-l)-(e-i)*(o*l-s*a))/c}},lli4:function(t,e,r,i){const o=t.x,s=t.y,a=e.x,l=e.y,c=r.x,h=r.y,d=i.x,u=i.y;return xi.lli8(o,s,a,l,c,h,d,u)},lli:function(t,e){return xi.lli4(t,t.c,e,e.c)},makeline:function(t,e){return new Bezier(t.x,t.y,(t.x+e.x)/2,(t.y+e.y)/2,e.x,e.y)},findbbox:function(t){let e=yi,r=yi,i=bi,o=bi;return t.forEach((function(t){const s=t.bbox();e>s.x.min&&(e=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)})),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(t,e,r,i,o){if(!xi.bboxoverlap(e,i))return[];const s=[],a=[t.startcap,t.forward,t.back,t.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach((function(e){e.virtual||l.forEach((function(i){if(i.virtual)return;const a=e.intersects(i,o);a.length>0&&(a.c1=e,a.c2=i,a.s1=t,a.s2=r,s.push(a))}))})),s},makeshape:function(t,e,r){const i=e.points.length,o=t.points.length,s=xi.makeline(e.points[i-1],t.points[0]),a=xi.makeline(t.points[o-1],e.points[0]),l={startcap:s,forward:t,back:e,endcap:a,bbox:xi.findbbox([s,t,e,a]),intersections:function(t){return xi.shapeintersections(l,l.bbox,t,t.bbox,r)}};return l},getminmax:function(t,e,r){if(!r)return{min:0,max:0};let i,o,s=yi,a=bi;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,c=r.length;l<c;l++)i=r[l],o=t.get(i),o[e]<s&&(s=o[e]),o[e]>a&&(a=o[e]);return{min:s,mid:(s+a)/2,max:a,size:a-s}},align:function(t,e){const r=e.p1.x,i=e.p1.y,o=-di(e.p2.y-i,e.p2.x-r);return t.map((function(t){return{x:(t.x-r)*li(o)-(t.y-i)*ci(o),y:(t.x-r)*ci(o)+(t.y-i)*li(o)}}))},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=t.length-1,i=xi.align(t,e),o=function(t){return 0<=t&&t<=1};if(2===r){const t=i[0].y,e=i[1].y,r=i[2].y,s=t-2*e+r;if(0!==s){const i=-ui(e*e-t*r),a=-t+e;return[-(i+a)/s,-(-i+a)/s].filter(o)}return e!==r&&0===s?[(2*e-r)/(2*e-2*r)].filter(o):[]}const s=i[0].y,a=i[1].y,l=i[2].y;let c=3*a-s-3*l+i[3].y,h=3*s-6*a+3*l,d=-3*s+3*a,u=s;if(xi.approximately(c,0)){if(xi.approximately(h,0))return xi.approximately(d,0)?[]:[-u/d].filter(o);const t=ui(d*d-4*h*u),e=2*h;return[(t-d)/e,(-d-t)/e].filter(o)}h/=c,d/=c,u/=c;const p=(3*d-h*h)/3,m=p/3,f=(2*h*h*h-9*h*d+27*u)/27,v=f/2,g=v*v+m*m*m;let y,_,x,w,C;if(g<0){const t=-p/3,e=ui(t*t*t),r=-f/(2*e),i=hi(r<-1?-1:r>1?1:r),s=2*mi(e);return x=s*li(i/3)-h/3,w=s*li((i+vi)/3)-h/3,C=s*li((i+2*vi)/3)-h/3,[x,w,C].filter(o)}if(0===g)return y=v<0?mi(-v):-mi(v),x=2*y-h/3,w=-y-h/3,[x,w].filter(o);{const t=ui(g);return y=mi(-v+t),_=mi(v+t),[y-_-h/3].filter(o)}},droots:function(t){if(3===t.length){const e=t[0],r=t[1],i=t[2],o=e-2*r+i;if(0!==o){const t=-ui(r*r-e*i),s=-e+r;return[-(t+s)/o,-(-t+s)/o]}return r!==i&&0===o?[(2*r-i)/(2*(r-i))]:[]}if(2===t.length){const e=t[0],r=t[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(t,e,r,i,o){let s,a,l,c,h=0,d=0;const u=xi.compute(t,e),p=xi.compute(t,r),m=u.x*u.x+u.y*u.y;if(i?(s=ui(pi(u.y*p.z-p.y*u.z,2)+pi(u.z*p.x-p.z*u.x,2)+pi(u.x*p.y-p.x*u.y,2)),a=pi(m+u.z*u.z,1.5)):(s=u.x*p.y-u.y*p.x,a=pi(m,1.5)),0===s||0===a)return{k:0,r:0};if(h=s/a,d=a/s,!o){const o=xi.curvature(t-.001,e,r,i,!0).k,s=xi.curvature(t+.001,e,r,i,!0).k;c=(s-h+(h-o))/2,l=(ai(s-h)+ai(h-o))/2}return{k:h,r:d,dk:c,adk:l}},inflections:function(t){if(t.length<4)return[];const e=xi.align(t,{p1:t[0],p2:t.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,o=e[1].x*e[2].y,s=18*(-3*r+2*i+3*o-e[3].x*e[2].y),a=18*(3*r-i-3*o),l=18*(o-r);if(xi.approximately(s,0)){if(!xi.approximately(a,0)){let t=-l/a;if(0<=t&&t<=1)return[t]}return[]}const c=2*s;if(xi.approximately(c,0))return[];const h=a*a-4*s*l;if(h<0)return[];const d=Math.sqrt(h);return[(d-a)/c,-(a+d)/c].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,e){const r=["x","y"],i=r.length;for(let o,s,a,l,c=0;c<i;c++)if(o=r[c],s=t[o].mid,a=e[o].mid,l=(t[o].size+e[o].size)/2,ai(s-a)>=l)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,r){const i=t.bbox(),o=e.bbox(),s=1e5,a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(s*(t._t1+t._t2)/2|0)/s+"/"+(s*(e._t1+e._t2)/2|0)/s];let l=t.split(.5),c=e.split(.5),h=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];h=h.filter((function(t){return xi.bboxoverlap(t.left.bbox(),t.right.bbox())}));let d=[];return 0===h.length||(h.forEach((function(t){d=d.concat(xi.pairiteration(t.left,t.right,a))})),d=d.filter((function(t,e){return d.indexOf(t)===e}))),d},getccenter:function(t,e,r){const i=e.x-t.x,o=e.y-t.y,s=r.x-e.x,a=r.y-e.y,l=i*li(gi)-o*ci(gi),c=i*ci(gi)+o*li(gi),h=s*li(gi)-a*ci(gi),d=s*ci(gi)+a*li(gi),u=(t.x+e.x)/2,p=(t.y+e.y)/2,m=(e.x+r.x)/2,f=(e.y+r.y)/2,v=u+l,g=p+c,y=m+h,_=f+d,x=xi.lli8(u,p,v,g,m,f,y,_),w=xi.dist(x,t);let C,z=di(t.y-x.y,t.x-x.x),S=di(e.y-x.y,e.x-x.x),$=di(r.y-x.y,r.x-x.x);return z<$?((z>S||S>$)&&(z+=vi),z>$&&(C=$,$=z,z=C)):$<S&&S<z?(C=$,$=z,z=C):$+=vi,x.s=z,x.e=$,x.r=w,x},numberSort:function(t,e){return t-e}};class PolyBezier{constructor(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(t){return xi.pointsToString(t.points)})).join(", ")+"]"}addCurve(t){this.curves.push(t),this._3d=this._3d||t._3d}length(){return this.curves.map((function(t){return t.length()})).reduce((function(t,e){return t+e}))}curve(t){return this.curves[t]}bbox(){const t=this.curves;for(var e=t[0].bbox(),r=1;r<t.length;r++)xi.expandbox(e,t[r].bbox());return e}offset(t){const e=[];return this.curves.forEach((function(r){e.push(...r.offset(t))})),new PolyBezier(e)}}const{abs:wi,min:Ci,max:ki,cos:zi,sin:Si,acos:$i,sqrt:Ai}=Math,Ei=Math.PI;class Bezier{constructor(t){let e=t&&t.forEach?t:Array.from(arguments).slice(),r=!1;if("object"==typeof e[0]){r=e.length;const t=[];e.forEach((function(e){["x","y","z"].forEach((function(r){void 0!==e[r]&&t.push(e[r])}))})),e=t}let i=!1;const o=e.length;if(r){if(r>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!i&&(9===o||12===o)||t&&t[0]&&void 0!==t[0].z,a=this.points=[];for(let t=0,r=s?3:2;t<o;t+=r){var l={x:e[t],y:e[t+1]};s&&(l.z=e[t+2]),a.push(l)}const c=this.order=a.length-1,h=this.dims=["x","y"];s&&h.push("z"),this.dimlen=h.length;const d=xi.align(a,{p1:a[0],p2:a[c]}),u=xi.dist(a[0],a[c]);this._linear=d.reduce(((t,e)=>t+wi(e.y)),0)<u/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(t,e,r,i){if(void 0===i&&(i=.5),0===i)return new Bezier(e,e,r);if(1===i)return new Bezier(t,e,e);const o=Bezier.getABC(2,t,e,r,i);return new Bezier(t,o.A,r)}static cubicFromPoints(t,e,r,i,o){void 0===i&&(i=.5);const s=Bezier.getABC(3,t,e,r,i);void 0===o&&(o=xi.dist(e,s.C));const a=o*(1-i)/i,l=xi.dist(t,r),c=(r.x-t.x)/l,h=(r.y-t.y)/l,d=o*c,u=o*h,p=a*c,m=a*h,f=e.x-d,v=e.y-u,g=e.x+p,y=e.y+m,_=s.A,x=_.x+(f-_.x)/(1-i),w=_.y+(v-_.y)/(1-i),C=_.x+(g-_.x)/i,z=_.y+(y-_.y)/i,S={x:t.x+(x-t.x)/i,y:t.y+(w-t.y)/i},$={x:r.x+(C-r.x)/(1-i),y:r.y+(z-r.y)/(1-i)};return new Bezier(t,S,$,r)}static getUtils(){return xi}getUtils(){return Bezier.getUtils()}static get PolyBezier(){return PolyBezier}valueOf(){return this.toString()}toString(){return xi.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const t=this.points,e=["M",t[0].x,t[0].y,2===this.order?"Q":"C"];for(let r=1,i=t.length;r<i;r++)e.push(t[r].x),e.push(t[r].y);return e.join(" ")}setRatios(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]}verify(){const t=this.coordDigest();t!==this._print&&(this._print=t,this.update())}coordDigest(){return this.points.map((function(t,e){return""+e+t.x+t.y+(t.z?t.z:0)})).join("")}update(){this._lut=[],this.dpoints=xi.derive(this.points,this._3d),this.computedirection()}computedirection(){const t=this.points,e=xi.angle(t[0],t[this.order],t[1]);this.clockwise=e>0}length(){return xi.length(this.derivative.bind(this))}static getABC(t=2,e,r,i,o=.5){const s=xi.projectionratio(o,t),a=1-s,l={x:s*e.x+a*i.x,y:s*e.y+a*i.y},c=xi.abcratio(o,t);return{A:{x:r.x+(r.x-l.x)/c,y:r.y+(r.y-l.y)/c},B:r,C:l,S:e,E:i}}getABC(t,e){e=e||this.get(t);let r=this.points[0],i=this.points[this.order];return Bezier.getABC(this.order,r,e,i,t)}getLUT(t){if(this.verify(),t=t||100,this._lut.length===t+1)return this._lut;this._lut=[],t++,this._lut=[];for(let e,r,i=0;i<t;i++)r=i/(t-1),e=this.compute(r),e.t=r,this._lut.push(e);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),o=[];for(let t,s=0,a=0;s<i.length;s++)t=i[s],xi.dist(t,e)<r&&(o.push(t),a+=s/i.length);return!!o.length&&(t/=o.length)}project(t){const e=this.getLUT(),r=e.length-1,i=xi.closest(e,t),o=i.mpos,s=(o-1)/r,a=(o+1)/r,l=.1/r;let c,h=i.mdist,d=s,u=d;h+=1;for(let e;d<a+l;d+=l)c=this.compute(d),e=xi.dist(t,c),e<h&&(h=e,u=d);return u=u<0?0:u>1?1:u,c=this.compute(u),c.t=u,c.d=h,c}get(t){return this.compute(t)}point(t){return this.points[t]}compute(t){return this.ratios?xi.computeWithRatios(t,this.points,this.ratios,this._3d):xi.compute(t,this.points,this._3d,this.ratios)}raise(){const t=this.points,e=[t[0]],r=t.length;for(let i,o,s=1;s<r;s++)i=t[s],o=t[s-1],e[s]={x:(r-s)/r*i.x+s/r*o.x,y:(r-s)/r*i.y+s/r*o.y};return e[r]=t[r-1],new Bezier(e)}derivative(t){return xi.compute(t,this.dpoints[0],this._3d)}dderivative(t){return xi.compute(t,this.dpoints[1],this._3d)}align(){let t=this.points;return new Bezier(xi.align(t,{p1:t[0],p2:t[t.length-1]}))}curvature(t){return xi.curvature(t,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return xi.inflections(this.points)}normal(t){return this._3d?this.__normal3(t):this.__normal2(t)}__normal2(t){const e=this.derivative(t),r=Ai(e.x*e.x+e.y*e.y);return{t,x:-e.y/r,y:e.x/r}}__normal3(t){const e=this.derivative(t),r=this.derivative(t+.01),i=Ai(e.x*e.x+e.y*e.y+e.z*e.z),o=Ai(r.x*r.x+r.y*r.y+r.z*r.z);e.x/=i,e.y/=i,e.z/=i,r.x/=o,r.y/=o,r.z/=o;const s={x:r.y*e.z-r.z*e.y,y:r.z*e.x-r.x*e.z,z:r.x*e.y-r.y*e.x},a=Ai(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=a,s.y/=a,s.z/=a;const l=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t,x:l[0]*e.x+l[1]*e.y+l[2]*e.z,y:l[3]*e.x+l[4]*e.y+l[5]*e.z,z:l[6]*e.x+l[7]*e.y+l[8]*e.z}}hull(t){let e=this.points,r=[],i=[],o=0;for(i[o++]=e[0],i[o++]=e[1],i[o++]=e[2],3===this.order&&(i[o++]=e[3]);e.length>1;){r=[];for(let s,a=0,l=e.length-1;a<l;a++)s=xi.lerp(t,e[a],e[a+1]),i[o++]=s,r.push(s);e=r}return i}split(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;const r=this.hull(t),i={left:2===this.order?new Bezier([r[0],r[3],r[5]]):new Bezier([r[0],r[4],r[7],r[9]]),right:2===this.order?new Bezier([r[5],r[4],r[2]]):new Bezier([r[9],r[8],r[6],r[3]]),span:r};return i.left._t1=xi.map(0,0,1,this._t1,this._t2),i.left._t2=xi.map(t,0,1,this._t1,this._t2),i.right._t1=xi.map(t,0,1,this._t1,this._t2),i.right._t2=xi.map(1,0,1,this._t1,this._t2),e?(e=xi.map(e,t,1,0,1),i.right.split(e).left):i}extrema(){const t={};let e=[];return this.dims.forEach(function(r){let i=function(t){return t[r]},o=this.dpoints[0].map(i);t[r]=xi.droots(o),3===this.order&&(o=this.dpoints[1].map(i),t[r]=t[r].concat(xi.droots(o))),t[r]=t[r].filter((function(t){return t>=0&&t<=1})),e=e.concat(t[r].sort(xi.numberSort))}.bind(this)),t.values=e.sort(xi.numberSort).filter((function(t,r){return e.indexOf(t)===r})),t}bbox(){const t=this.extrema(),e={};return this.dims.forEach(function(r){e[r]=xi.getminmax(this,r,t[r])}.bind(this)),e}overlaps(t){const e=this.bbox(),r=t.bbox();return xi.bboxoverlap(e,r)}offset(t,e){if(void 0!==e){const r=this.get(t),i=this.normal(t),o={c:r,n:i,x:r.x+i.x*e,y:r.y+i.y*e};return this._3d&&(o.z=r.z+i.z*e),o}if(this._linear){const e=this.normal(0),r=this.points.map((function(r){const i={x:r.x+t*e.x,y:r.y+t*e.y};return r.z&&e.z&&(i.z=r.z+t*e.z),i}));return[new Bezier(r)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}simple(){if(3===this.order){const t=xi.angle(this.points[0],this.points[3],this.points[1]),e=xi.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&e<0||t<0&&e>0)return!1}const t=this.normal(0),e=this.normal(1);let r=t.x*e.x+t.y*e.y;return this._3d&&(r+=t.z*e.z),wi($i(r))<Ei/3}reduce(){let t,e,r=0,i=0,o=.01,s=[],a=[],l=this.extrema().values;for(-1===l.indexOf(0)&&(l=[0].concat(l)),-1===l.indexOf(1)&&l.push(1),r=l[0],t=1;t<l.length;t++)i=l[t],e=this.split(r,i),e._t1=r,e._t2=i,s.push(e),r=i;return s.forEach((function(t){for(r=0,i=0;i<=1;)for(i=r+o;i<=1.01;i+=o)if(e=t.split(r,i),!e.simple()){if(i-=o,wi(r-i)<o)return[];e=t.split(r,i),e._t1=xi.map(r,0,1,t._t1,t._t2),e._t2=xi.map(i,0,1,t._t1,t._t2),a.push(e),r=i;break}r<1&&(e=t.split(r,1),e._t1=xi.map(r,0,1,t._t1,t._t2),e._t2=t._t2,a.push(e))})),a}translate(t,e,r){r="number"==typeof r?r:e;const i=this.order;let o=this.points.map(((t,o)=>(1-o/i)*e+o/i*r));return new Bezier(this.points.map(((e,r)=>({x:e.x+t.x*o[r],y:e.y+t.y*o[r]}))))}scale(t){const e=this.order;let r=!1;if("function"==typeof t&&(r=t),r&&2===e)return this.raise().scale(r);const i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):t,r?r(1):t);const s=r?r(0):t,a=r?r(1):t,l=[this.offset(0,10),this.offset(1,10)],c=[],h=xi.lli4(l[0],l[0].c,l[1],l[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(t){const r=c[t*e]=xi.copy(o[t*e]);r.x+=(t?a:s)*l[t].n.x,r.y+=(t?a:s)*l[t].n.y})),r?([0,1].forEach((function(s){if(2!==e||!s){var a=o[s+1],l={x:a.x-h.x,y:a.y-h.y},d=r?r((s+1)/e):t;r&&!i&&(d=-d);var u=Ai(l.x*l.x+l.y*l.y);l.x/=u,l.y/=u,c[s+1]={x:a.x+d*l.x,y:a.y+d*l.y}}})),new Bezier(c)):([0,1].forEach((t=>{if(2===e&&t)return;const r=c[t*e],i=this.derivative(t),s={x:r.x+i.x,y:r.y+i.y};c[t+1]=xi.lli4(r,s,h,o[t+1])})),new Bezier(c))}outline(t,e,r,i){if(e=void 0===e?t:e,this._linear){const o=this.normal(0),s=this.points[0],a=this.points[this.points.length-1];let l,c,h;void 0===r&&(r=t,i=e),l={x:s.x+o.x*t,y:s.y+o.y*t},h={x:a.x+o.x*r,y:a.y+o.y*r},c={x:(l.x+h.x)/2,y:(l.y+h.y)/2};const d=[l,c,h];l={x:s.x-o.x*e,y:s.y-o.y*e},h={x:a.x-o.x*i,y:a.y-o.y*i},c={x:(l.x+h.x)/2,y:(l.y+h.y)/2};const u=[h,c,l],p=xi.makeline(u[2],d[0]),m=xi.makeline(d[2],u[0]),f=[p,new Bezier(d),m,new Bezier(u)];return new PolyBezier(f)}const o=this.reduce(),s=o.length,a=[];let l,c=[],h=0,d=this.length();const u=void 0!==r&&void 0!==i;function p(t,e,r,i,o){return function(s){const a=i/r,l=(i+o)/r,c=e-t;return xi.map(s,0,1,t+a*c,t+l*c)}}o.forEach((function(o){const s=o.length();u?(a.push(o.scale(p(t,r,d,h,s))),c.push(o.scale(p(-e,-i,d,h,s)))):(a.push(o.scale(t)),c.push(o.scale(-e))),h+=s})),c=c.map((function(t){return l=t.points,l[3]?t.points=[l[3],l[2],l[1],l[0]]:t.points=[l[2],l[1],l[0]],t})).reverse();const m=a[0].points[0],f=a[s-1].points[a[s-1].points.length-1],v=c[s-1].points[c[s-1].points.length-1],g=c[0].points[0],y=xi.makeline(v,m),_=xi.makeline(f,g),x=[y].concat(a).concat([_]).concat(c);return new PolyBezier(x)}outlineshapes(t,e,r){e=e||t;const i=this.outline(t,e).curves,o=[];for(let t=1,e=i.length;t<e/2;t++){const s=xi.makeshape(i[t],i[e-t],r);s.startcap.virtual=t>1,s.endcap.virtual=t<e/2-1,o.push(s)}return o}intersects(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof Bezier&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)}lineIntersects(t){const e=Ci(t.p1.x,t.p2.x),r=Ci(t.p1.y,t.p2.y),i=ki(t.p1.x,t.p2.x),o=ki(t.p1.y,t.p2.y);return xi.roots(this.points,t).filter((t=>{var s=this.get(t);return xi.between(s.x,e,i)&&xi.between(s.y,r,o)}))}selfintersects(t){const e=this.reduce(),r=e.length-2,i=[];for(let o,s,a,l=0;l<r;l++)s=e.slice(l,l+1),a=e.slice(l+2),o=this.curveintersects(s,a,t),i.push(...o);return i}curveintersects(t,e,r){const i=[];t.forEach((function(t){e.forEach((function(e){t.overlaps(e)&&i.push({left:t,right:e})}))}));let o=[];return i.forEach((function(t){const e=xi.pairiteration(t.left,t.right,r);e.length>0&&(o=o.concat(e))})),o}arcs(t){return t=t||.5,this._iterate(t,[])}_error(t,e,r,i){const o=(i-r)/4,s=this.get(r+o),a=this.get(i-o),l=xi.dist(t,e),c=xi.dist(t,s),h=xi.dist(t,a);return wi(c-l)+wi(h-l)}_iterate(t,e){let r,i=0,o=1;do{r=0,o=1;let s,a,l,c,h,d=this.get(i),u=!1,p=!1,m=o,f=1,v=0;do{if(p=u,c=l,m=(i+o)/2,v++,s=this.get(m),a=this.get(o),l=xi.getccenter(d,s,a),l.interval={start:i,end:o},u=this._error(l,d,i,o)<=t,h=p&&!u,h||(f=o),u){if(o>=1){if(l.interval.end=f=1,c=l,o>1){let t={x:l.x+l.r*zi(l.e),y:l.y+l.r*Si(l.e)};l.e+=xi.angle({x:l.x,y:l.y},t,this.get(1))}break}o+=(o-i)/2}else o=m}while(!h&&r++<100);if(r>=100)break;c=c||l,e.push(c),i=f}while(o<1);return e}}const Ti=0,Mi=1,Pi=2,Ri={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Ii(t,e){return t.type===e}function Oi(t){const e=[],r=function(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:Ti,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:Mi,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:Pi,text:""},e}(t);let i="BOD",o=0,s=r[o];for(;!Ii(s,Pi);){let a=0;const l=[];if("BOD"===i){if("M"!==s.text&&"m"!==s.text)return Oi("M0,0"+t);o++,a=Ri[s.text],i=s.text}else Ii(s,Mi)?a=Ri[i]:(o++,a=Ri[s.text],i=s.text);if(!(o+a<r.length))throw new Error("Path data ended short");for(let t=o;t<o+a;t++){const e=r[t];if(!Ii(e,Mi))throw new Error("Param not a number: "+i+","+e.text);l[l.length]=+e.text}if("number"!=typeof Ri[i])throw new Error("Bad segment: "+i);{const t={key:i,data:l};e.push(t),o+=a,s=r[o],"M"===i&&(i="L"),"m"===i&&(i="l")}}return e}function Di(t){const e=[];for(const{key:r,data:i}of t)switch(e.push(r),r){case"C":case"c":e.push(i[0],`${i[1]},`,i[2],`${i[3]},`,i[4],i[5]);break;case"S":case"s":case"Q":case"q":e.push(i[0],`${i[1]},`,i[2],i[3]);break;default:e.push(...i)}return e.join(" ")}function Bi(t){const e=[];let r="",i=0,o=0,s=0,a=0,l=0,c=0;for(const{key:h,data:d}of t){switch(h){case"M":e.push({key:"M",data:[...d]}),[i,o]=d,[s,a]=d;break;case"C":e.push({key:"C",data:[...d]}),i=d[4],o=d[5],l=d[2],c=d[3];break;case"L":e.push({key:"L",data:[...d]}),[i,o]=d;break;case"H":i=d[0],e.push({key:"L",data:[i,o]});break;case"V":o=d[0],e.push({key:"L",data:[i,o]});break;case"S":{let t=0,s=0;"C"===r||"S"===r?(t=i+(i-l),s=o+(o-c)):(t=i,s=o),e.push({key:"C",data:[t,s,...d]}),l=d[0],c=d[1],i=d[2],o=d[3];break}case"T":{const[t,s]=d;let a=0,h=0;"Q"===r||"T"===r?(a=i+(i-l),h=o+(o-c)):(a=i,h=o);const u=i+2*(a-i)/3,p=o+2*(h-o)/3,m=t+2*(a-t)/3,f=s+2*(h-s)/3;e.push({key:"C",data:[u,p,m,f,t,s]}),l=a,c=h,i=t,o=s;break}case"Q":{const[t,r,s,a]=d,h=i+2*(t-i)/3,u=o+2*(r-o)/3,p=s+2*(t-s)/3,m=a+2*(r-a)/3;e.push({key:"C",data:[h,u,p,m,s,a]}),l=t,c=r,i=s,o=a;break}case"A":{const t=Math.abs(d[0]),r=Math.abs(d[1]),s=d[2],a=d[3],l=d[4],c=d[5],h=d[6];if(0===t||0===r)e.push({key:"C",data:[i,o,c,h,c,h]}),i=c,o=h;else if(i!==c||o!==h){Hi(i,o,c,h,t,r,s,a,l).forEach((function(t){e.push({key:"C",data:t})})),i=c,o=h}break}case"Z":e.push({key:"Z",data:[]}),i=s,o=a}r=h}return e}function Li(t,e,r){return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]}function Hi(t,e,r,i,o,s,a,l,c,h){const d=(u=a,Math.PI*u/180);var u;let p=[],m=0,f=0,v=0,g=0;if(h)[m,f,v,g]=h;else{[t,e]=Li(t,e,-d),[r,i]=Li(r,i,-d);const a=(t-r)/2,h=(e-i)/2;let u=a*a/(o*o)+h*h/(s*s);u>1&&(u=Math.sqrt(u),o*=u,s*=u);const p=o*o,y=s*s,_=p*y-p*h*h-y*a*a,x=p*h*h+y*a*a,w=(l===c?-1:1)*Math.sqrt(Math.abs(_/x));v=w*o*h/s+(t+r)/2,g=w*-s*a/o+(e+i)/2,m=Math.asin(parseFloat(((e-g)/s).toFixed(9))),f=Math.asin(parseFloat(((i-g)/s).toFixed(9))),t<v&&(m=Math.PI-m),r<v&&(f=Math.PI-f),m<0&&(m=2*Math.PI+m),f<0&&(f=2*Math.PI+f),c&&m>f&&(m-=2*Math.PI),!c&&f>m&&(f-=2*Math.PI)}let y=f-m;if(Math.abs(y)>120*Math.PI/180){const t=f,e=r,l=i;f=c&&f>m?m+120*Math.PI/180*1:m+120*Math.PI/180*-1,p=Hi(r=v+o*Math.cos(f),i=g+s*Math.sin(f),e,l,o,s,a,0,c,[f,t,v,g])}y=f-m;const _=Math.cos(m),x=Math.sin(m),w=Math.cos(f),C=Math.sin(f),z=Math.tan(y/4),S=4/3*o*z,$=4/3*s*z,A=[t,e],E=[t+S*x,e-$*_],T=[r+S*C,i-$*w],P=[r,i];if(E[0]=2*A[0]-E[0],E[1]=2*A[1]-E[1],h)return[E,T,P].concat(p);{p=[E,T,P].concat(p);const t=[];for(let e=0;e<p.length;e+=3){const r=Li(p[e][0],p[e][1],d),i=Li(p[e+1][0],p[e+1][1],d),o=Li(p[e+2][0],p[e+2][1],d);t.push([r[0],r[1],i[0],i[1],o[0],o[1]])}return t}}const Ni=1e-6,qi=1e-12;function Fi(){for(var t=arguments,e=t.length-1,r=e,i=[],o=0;o<=e&&Math.abs(t[o])<=qi;o++)e--;switch(e){case 1:!function(t,e,r=[]){0!==e&&r.push(-t/e)}(t[r],t[r-1],i);break;case 2:!function(t,e,r,i=[]){var o=r,s=e/o,a=t/o,l=s*s-4*a;if(l>0){var c=Math.sqrt(l);i.push(.5*(-s+c)),i.push(.5*(-s-c))}else 0===l&&i.push(.5*-s)}(t[r],t[r-1],t[r-2],i);break;case 3:!function(t,e,r,i,o=[]){var s,a,l=r/i,c=e/i,h=(3*c-l*l)/3,d=(2*l*l*l-9*c*l+t/i*27)/27,u=l/3,p=d*d/4+h*h*h/27,m=d/2;Math.abs(p)<=Ni&&(p=0);if(p>0){var f=Math.sqrt(p);a=(s=-m+f)>=0?Math.pow(s,1/3):-Math.pow(-s,1/3),(s=-m-f)>=0?a+=Math.pow(s,1/3):a-=Math.pow(-s,1/3),o.push(a-u)}else if(p<0){var v=Math.sqrt(-h/3),g=Math.atan2(Math.sqrt(-p),-m)/3,y=Math.cos(g),_=Math.sin(g),x=Math.sqrt(3);o.push(2*v*y-u),o.push(-v*(y+x*_)-u),o.push(-v*(y-x*_)-u)}else s=m>=0?-Math.pow(m,1/3):Math.pow(-m,1/3),o.push(2*s-u),o.push(-s-u)}(t[r],t[r-1],t[r-2],t[r-3],i)}return i}function Wi(t,e,r,i,o,s,a,l,c,h,d,u,p){for(var m,f,v=Math.min(c,d),g=Math.min(h,u),y=Math.max(c,d),_=Math.max(h,u),x=Fi((m=h-u)*(-1*t+3*r+-3*o+a)+(f=d-c)*(-1*e+3*i+-3*s+l),m*(3*t+-6*r+3*o)+f*(3*e+-6*i+3*s),m*(-3*t+3*r)+f*(-3*e+3*i),m*t+f*e+(c*u-d*h)),w=0;w<x.length;w++){var C=x[w];if(0<=C&&C<=1){var z=t+(r-t)*C,S=e+(i-e)*C,$=r+(o-r)*C,A=i+(s-i)*C,E=z+($-z)*C,T=S+(A-S)*C,P=E+($+(o+(a-o)*C-$)*C-E)*C,O=T+(A+(s+(l-s)*C-A)*C-T)*C;if(c===d){if(g<=O&&O<=_){if(!p)return 1;p.push({t:C,p:[P,O]})}}else if(h===u){if(v<=P&&P<=y){if(!p)return 1;p.push({t:C,p:[P,O]})}}else if(P>=v&&O>=g&&P<=y&&O<=_){if(!p)return 1;p.push({t:C,p:[P,O]})}}}return p?p.length/2:0}function Ui(t){if(!Array.isArray(t))throw new Error("Input is not an array");const e=t.reduce(((t,e)=>{const r=t.length>0?t[t.length-1]:0;return t.push(r+e),t}),[]);return e.unshift(0),e.pop(),e}const ji=t=>t.reduce(((t,e)=>t+e),0),Gi=t=>{const e=t.points;return[e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y]},Vi=(t,e,r)=>{if("C"!=e.key)throw new Error("Invalid segment, should be cubic");const i=new Bezier(...t,...e.data),{left:o,right:s}=i.split(r);return[{key:"C",data:Gi(o)},{key:"C",data:Gi(s)}]},Qi=(t,e,r,i)=>{const o=Oi(t),s=Oi(r);if(o.some((t=>!["C","Z","M"].includes(t.key)))||s.some((t=>!["C","Z","M"].includes(t.key))))throw new Error("Invalid path");const a=e.right.map((t=>Object.assign({},t))),l=i.right;let c=i.right.length-1,h=e.right.length-1;for(;c>=0&&l[c].cumulRatio>a[h].cumulRatio;)c--;const d=c;for(;c>=0;c--){for(;h>0&&l[c].cumulRatio<a[h].cumulRatio;)h--;let t=(l[c].cumulRatio-a[h].cumulRatio)*e.rLen/a[h].len;0===h&&(t+=e.top.t);const r=(0===h?e.left[e.left.length-2]:a[h-1]).seg.data.slice(-2),i=Vi(r,a[h].seg,t);o.splice(h+e.left.length,1,...i),a[h].len*=t,a[h].seg=i[0]}const u=e.left.map((t=>Object.assign({},t))),p=i.left;for(u[u.length-1].len=a[0].len,u[u.length-1].seg=a[0].seg,c=i.left.length-1,h=e.left.length-1;c>=0;c--){for(;h>0&&p[c].cumulRatio<u[h].cumulRatio;)h--;let t=(p[c].cumulRatio-u[h].cumulRatio)*e.lLen/u[h].len;0===h&&(t+=e.bot.t);const r=(0===h?o[0]:u[h-1].seg).data.slice(-2),i=Vi(r,u[h].seg,t);o.splice(h+1,1,...i),u[h].len*=t,u[h].seg=i[0]}let m;const f=a[a.length-1];for(f.len=u[0].len,f.seg=u[0].seg,c=l.length-1;c>d;c--){let t=(l[c].cumulRatio-f.cumulRatio)*e.rLen/f.len;const r=Vi(o[0].data,f.seg,t);o.splice(1,1,...r),f.seg=r[0],f.len*=t,m||(m=r[1])}return m&&Ki(o,m),Di(o)},Zi=t=>{const e=t.slice(0,2),r=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]];if(2!=r.length)throw new Error("Incorrect median");return r[0][0]=(r[1][0]+r[0][0])/2,r[0][1]=(r[1][1]+r[0][1])/2,r[1][0]=r[0][0]-4*(r[1][0]-r[0][0]),r[1][1]=r[0][1]-4*(r[1][1]-r[0][1]),r},Ki=(t,e)=>{const r=t.indexOf(e);if(r<0)throw new Error("new start not in path");const i=t.slice(r,t.length-1);t.splice(r,t.length-r-1),t.splice(1,0,...i);const o=t[t.length-2].data.slice(-2);return t[0].data=o,Di(t)},Xi=(t,e)=>{const r=(t=>{const e=t.slice(-2),r=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]];if(2!=r.length)throw new Error("Incorrect median");return r[0][0]=(r[1][0]+r[0][0])/2,r[0][1]=(r[1][1]+r[0][1])/2,r[1][0]=r[0][0]+3*(r[1][0]-r[0][0]),r[1][1]=r[0][1]+3*(r[1][1]-r[0][1]),r})(e).flat(),i=Zi(e).flat(),o=Bi(Oi(t));let s,a,l;for(let t=1;t<o.length-1;t++){const e=o[t],{key:c,data:h}=e;if("C"==c){l=[];const c=o[t-1].data.slice(-2);if(!s&&(Wi(...c,...h,...r,l),l.length)){s={seg:e,t:l[0].t};continue}if(!a&&(Wi(...c,...h,...i,l),l.length)){a={seg:e,t:l[0].t};continue}if(s&&a)break}}if(!s)throw console.log(t,r),new Error("Error, top not found");if(!a)throw new Error("Error, bottom not found");Ki(o,a.seg);const c=o.slice(1,-2);let h;try{h=c.map((t=>new Bezier(...t.data).length()))}catch(e){throw console.log(t,c,e),new Error("yo")}const d=c.indexOf(s.seg),u=c.indexOf(a.seg);if(d<0||u<0)throw new Error("Error");const p=c.slice(0,d+1),m=c.slice(d);m.push(c[0]);const f=h.slice(0,d+1),v=h.slice(d);v.push(h[0]);const g=[...f],y=[...v];f[0]*=1-a.t,f[f.length-1]*=s.t,v[0]*=1-s.t,v[v.length-1]*=a.t;let _=[...f];const x=ji(f);_=_.map((t=>t/x));const w=Ui(_);let C=[...v];const z=ji(v);C=C.map((t=>t/z));const S=Ui(C),$=p.map(((t,e)=>({ratio:_[e],cumulRatio:w[e],len:g[e],seg:p[e]}))),A=m.map(((t,e)=>({ratio:C[e],cumulRatio:S[e],len:y[e],seg:m[e]})));return{top:s,bot:a,left:$,right:A,lLen:x,rLen:z}},Yi={},Ji=t=>i(void 0,void 0,void 0,(function*(){return t in Yi?Yi[t]:si(`_${t}.json`).then((t=>{if(!t.ok)throw new Error("Dictionnary fetch request was not ok");return t.json()})).then((e=>(e.character=t,e.strokes&&e.strokes.length&&e.medians&&(e.strokes.length!=e.medians.length?console.warn("strokes and medians length do not match for ",e.character):(e.strokes=e.strokes.map(((t,r)=>((t,e)=>{const r=Zi(e),i=Bi(Oi(t));i.forEach(((t,e)=>{if("L"==t.key){t.key="C";const r=i[e].data.slice(-2);t.data=((t,e)=>[t[0]+(t[0]-e[0])/3,t[1]+(t[1]-e[1])/3,t[0]+2*(t[0]-e[0])/3,t[1]+2*(t[1]-e[1])/3,e[0],e[1]])(r,t.data)}}));const o=[];for(let t=0;t<i.length;t++){const{key:e,data:s}=i[t];if("C"==e){const[e,a]=i[t-1].data.slice(-2);if(Wi(e,a,...s,r[0][0],r[0][1],r[1][0],r[1][1],o),o.length){const e=i.slice(t,i.length-1);i.splice(t,i.length-t-1),i.splice(1,0,...e);const r=i[i.length-2].data.slice(-2);return i[0].data=r,Di(i)}}}})(t,e.medians[r]))),e.repartition=e.strokes.map(((r,i)=>{try{return Xi(e.strokes[i],e.medians[i])}catch(e){throw new Error(`char ${t} stroke ${i}: ${e}`)}})))),Yi[t]=e,e))).catch((e=>{throw new Error(t+"Dictionary fetch request failed: "+e)}))})),to={},eo=t=>i(void 0,void 0,void 0,(function*(){if(t in to)return to[t];const e=yield Ji(t);if(t!=e.decomposition){const t=(yield io([...e.decomposition],0)).data;Object.assign(e,t)}return e.components||(e.components=[]),to[t]=e,e})),ro=t=>(t=>t>=""&&t<="")(t)?"".includes(t)?3:2:0,io=(t,e)=>i(void 0,void 0,void 0,(function*(){const r=t[0],i=ro(r);if(!i)throw new Error("handleCDL should be given a valid decomposition");const o=[];e++;let s=0;for(let r=0;r<i;r++){const{data:r,idxForward:i}=yield oo(t,e);e=i,o.push(r),s+=r.len||0}return{data:{cdl:r,components:o,len:s},idxForward:e}})),oo=(t,e)=>i(void 0,void 0,void 0,(function*(){const r=t[e];return ro(r)?io(t,e):{data:yield eo(r),idxForward:e+1}})),no=t=>{if(!t)return 5;const e={:1,:2,:3,:4,:1,:2,:3,:4,:1,:2,:3,:4,:1,:2,:3,:4,:1,:2,:3,:4,:1,:2,:3,:4,:5};for(let r of t)if(r in e)return e[r];return 5},so=t=>{if(!t||!t.length)return"no pinyin";const e=t[0];if(!e)return"no pinyin";const r=e.match(/^[^(]+/);return r?r[0]:"no pinyin"},ao=t=>{if(!t)return"";let e=/Kangxi radical\s+\d+;?/g,r=t.replace(e,"");return e=/rad.\s+\d+;?/g,r=r.replace(e,""),e=/radical number\s+\d+;?/g,r=r.replace(e,""),r=r.replace(/;(\s*)$/,"$1"),r},lo=(t,e)=>{if(e.gridEl===t)return e;for(const r of e.components)if(r.gridEl===t)return r;for(const r of e.components){const e=lo(t,r);if(e)return e}},co=(t,e=void 0)=>{const r=((t,e)=>({mistakeCount:0,complete:!1,svgGroup:void 0,gridEl:void 0,opened:!1,data:t,parent:e,components:[]}))(t,e);return r.components=t.components.map((t=>co(t,r))),r},ho=t=>{const e=t.parent;if(!e)return 0;const r=e.components.indexOf(t),i=e.components.slice(0,r).map((t=>t.data.len||0)),o=i.reduce(((t,e)=>t+e),0);return ho(e)+o},uo=(t,e)=>{const r=t.data.len||0;if(!t.components.length){if(e>=r)throw new Error(`Stroke idx${e} not in ${t}`);return t}let i=0;for(const r of t.components){const t=r.data.len||0;if(i+=t,e<i)return uo(r,e-i+t)}throw new Error(`Stroke idx${e} not in ${t}`)},po=(t,e)=>{let r=0;for(const i of t.components){const t=i.data.len||0;if(r+=t,e<r){const o=e-r+t;return i.data.strokes?{data:i.data,idx:o}:po(i,o)}}},mo={minusone:t=>t-1,equal:(t,e)=>t===e,hanzi:"",toto:!1,hanziData:[],selectedIdx:0,strokesVisible:!1,rating:4,hanziWriters:{},lastFirstOrderCmp:void 0,selectCharacterIdx:t=>{fo.selectedIdx=t},cleanPinyin:so,cleanDescription:ao,getPinyinTone:no,cleanAndGetPinyinTone:t=>no(so(t)),prev:()=>{fo.selectedIdx=Math.max(0,fo.selectedIdx-1)},next:()=>{fo.selectedIdx=Math.min(fo.hanziData.length-1,fo.selectedIdx+1)},prevBtnVisible:Ne(["selectedIdx","currentComponent.complete"],(function(t,e){return t>0&&e})),nextBtnVisible:Ne(["selectedIdx","hanziData.length","currentComponent.complete"],(function(t,e,r){return t<e-1&&r})),complete:Ne(["selectedIdx","hanziData.length","currentComponent.complete"],(function(){return!(!fo.hanziData.length||!fo.hanziData.every((t=>t.complete)))})),currentComponent:Ne(["selectedIdx","hanziData","hanziData.length"],(function(t){return fo.hanziData&&fo.hanziData[t]})),getCurrentHanziWriter:()=>{var t,e,r;return null===(r=fo.hanziWriters[null===(e=null===(t=fo.currentComponent)||void 0===t?void 0:t.data)||void 0===e?void 0:e.character])||void 0===r?void 0:r.__target},resetComponentMistakes:(t=fo.currentComponent)=>{t.mistakeCount=0,t.components.forEach(fo.resetComponentMistakes)},restartCurrentQuiz:()=>{var t;fo.resetComponentMistakes(),null===(t=fo.getCurrentHanziWriter())||void 0===t||t.quiz({quizStartStrokeNum:0}),fo.lastFirstOrderCmp=void 0},breiflyShowAndRestartQuiz:()=>{const t=fo.getCurrentHanziWriter();fo.rating=1,t&&(t.showOutline(),setTimeout((()=>{t.hideOutline(),fo.restartCurrentQuiz()}),3e3))}},fo=(t=>{const e=new Proxy(t,Le());return window.state=e,e})(mo);He("selectedIdx",(()=>{fo.lastFirstOrderCmp=void 0})),He("hanzi",(t=>{const e=Array.from(t).map(eo);Promise.all(e).then((t=>fo.hanziData=t.map((t=>co(t)))))}));class CharacterQuiz extends Component{constructor(){super(...arguments),this.backboard=!1,this.active=!1,this.options={},this.cmpMistakeThreshold=2,this.lastMistakeStrokeNum=-1,this.ignoreMistake=!1,this.quizStarted=!1}static get observedAttributes(){return["character","active","strokes-visible"]}attributeChangedCallback(t,e,r){var i,o;r&&"{"==r[0]||("strokes-visible"==t&&(null!=r?null===(i=this.hanziWriter)||void 0===i||i.showOutline():null===(o=this.hanziWriter)||void 0===o||o.hideOutline()),"character"===t&&null!=r&&this.createHanziWriter(r),"active"!=t||null==r||this.quizStarted||(this.startQuiz(),this.quizStarted=!0))}createHanziWriter(t){const e=this.shadowRoot;this.hanziWriter=ii.create(e,t,Object.assign({charDataLoader:(t,e)=>{Ji(t).then(e)},showCharacter:!1,showHintAfterMisses:1,highlightOnComplete:!1,showOutline:!1,onMistake:this.onMistake.bind(this),onCorrectStroke:this.onCorrectStroke.bind(this),padding:10},this.options)),fo.hanziWriters[t]=this.hanziWriter;const r=new ResizeObserver((t=>{var e;for(const r of t){const t=r.contentRect;null===(e=this.hanziWriter)||void 0===e||e.updateDimensions({width:t.width,height:t.height})}}));return r.observe(this.shadowRoot.host),this.hanziWriter}startQuiz(t=0){if(!this.hanziWriter)return;const e=fo.getCurrentHanziWriter();let r;t&&e&&(r=e._options.strokeFadeDuration,e._options.strokeFadeDuration=0),this.hanziWriter.quiz({quizStartStrokeNum:t,leniency:1.45}),setTimeout((()=>{const e=fo.getCurrentHanziWriter();t&&e&&(e._options.strokeFadeDuration=r)}),0)}checkCompleteRec(t){const e=t.parent;e&&(e.components.every((t=>t.complete))&&(e.complete=!0),this.checkCompleteRec(e))}mistakeCheck(t){return!(t.mistakeCount>=3)||(fo.resetComponentMistakes(t),this.ignoreMistake=!0,setTimeout((()=>{const e=ho(t);this.startQuiz(e),this.ignoreMistake=!1,fo.lastFirstOrderCmp=void 0}),600),!1)}hasIntermediateCmpParent(t){return!!t.parent&&(!(!t.parent.data.pinyin||!t.parent.data.definition)||this.hasIntermediateCmpParent(t.parent))}isFirstOrderCmp(t){return!(!t.data.pinyin||!t.data.definition)&&(!(!t.parent||t.parent.parent)||this.hasIntermediateCmpParent(t))}onCorrectStrokeForCmpRec(t,e){const r=e.__target,[i,o]=(t=>{const e=ho(t);return[e,t.data.len?e+t.data.len-1:0]})(r);if(t==o){if(!this.mistakeCheck(r))return!1;if(this.isFirstOrderCmp(e)&&(fo.lastFirstOrderCmp=e),!e.parent||this.onCorrectStrokeForCmpRec(t,e.parent))return e.complete=!0,fo.currentComponent.complete&&(fo.currentComponent.complete=!0),!0}return!1}onCorrectStroke(t){if(!this.hanziWriter||!this.hanzicomponent)return;const e=t.strokeNum,r=uo(this.hanzicomponent,e);this.onCorrectStrokeForCmpRec(e,r)}incrementMistakeRec(t){t.mistakeCount++,t.parent&&this.incrementMistakeRec(t.parent)}onMistake(t){if(!this.hanzicomponent)return;if(this.ignoreMistake||t.strokeNum===this.lastMistakeStrokeNum)return;this.lastMistakeStrokeNum=t.strokeNum;const e=uo(this.hanzicomponent,t.strokeNum);fo.rating=Math.max(1,fo.rating-1),this.incrementMistakeRec(e)}}CharacterQuiz.css=tr`
      :host {
        position: relative;
        display: block;
        aspect-ratio: 1;
      }

      :host > * {
        position: absolute;
        top: 0;
        left: 0;
      }

      #grid-background-target {
        width: 100%;
        height: 100%;
        /* border: 1px solid #dfdfdf;*/
      }

      #grid-background-target > line {
        stroke: #f0f0f0;
      }
    `,CharacterQuiz.template=Je`
          <svg
            xmlns="http://www.w3.org/2000/svg"
            id="grid-background-target"
          >
            <line x1="0" y1="0" x2="100%" y2="100%" />
            <line x1="100%" y1="0" x2="0" y2="100%" />
            <line x1="50%" y1="0" x2="50%" y2="100%" />
            <line x1="0" y1="50%" x2="100%" y2="50%" />
          </svg>
    `;Xe(CharacterQuiz);class CharactersSlideshowQuiz extends Component{constructor(){super(...arguments),this.hanzi="",this.charactersData=[],this.currentCharacterComplete=!1,this.sliderWidth=0}getShiftWidth(t){var e;const r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(`#slideshow div:nth-of-type(${t+1})`);return`transform: translateX(-${r?r.offsetLeft:0}px)`}isMorphHidden(t){return!t}}CharactersSlideshowQuiz.css=tr`
      :host {
display: block;
        position: relative;
overflow: hidden;
      }
      character-quiz {
flex: 0 0 auto;
}
#slideshow {
display: flex;
height: 100%;
  transition: transform 1s ease;

}

#slideshow:not(:has(div)) {
aspect-ratio: 1;
}

#button-layer {
height: 100%;
width:100%;
position: absolute;
top:0;
 display: flex;
  justify-content: center;
  align-items: center;
pointer-events: none;
}
#prev-btn {
left: 0;
position: absolute;
}
#next-btn {
right: 0;
position: absolute;
}
md-icon-button {
pointer-events: all;
}
[hidden] {
display: none;
}
.slide-wrapper {
width: 100%;
min-height: 100%;
flex:none;
box-sizing: border-box;
      padding: 8px;
padding-top: 0;
}

.slide-wrapper-2 {
        border: 1px solid #dfdfdf;
      background: white;
overflow: hidden;
}
    `,CharactersSlideshowQuiz.template=Je`

    <div id="slideshow"
        repeat="hanziData"
        as="hanziComponent"
        index-as="index"
        style="{this.getShiftWidth(selectedIdx)}">
<div class="slide-wrapper">
<div class="slide-wrapper-2">
          <character-quiz
hidden="{hanziComponent.opened}"
            backboard
            strokes-visible="{strokesVisible}"
            character="{hanziComponent.data.character}"
            active="{equal(index,selectedIdx)}"
            .hanziComponent={hanziComponent}
          > </character-quiz>
<character-morph hidden="{this.isMorphHidden(hanziComponent.opened)}" .data={hanziComponent} ></character-morph>
</div>
</div>
    </div>


<div id="button-layer">

      <md-icon-button id="prev-btn" hidden="{!prevBtnVisible}" @click=prev()>
<md-icon>
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="currentColor" d="M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"/></svg>
</md-icon>
      </md-icon-button>
      <md-icon-button id="next-btn" hidden="{!nextBtnVisible}" @click=next()>
<md-icon>
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path fill="currentColor" d="M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"/></svg>
</md-icon>
      </md-icon-button>

</div>
`;Xe(CharactersSlideshowQuiz);class CharacterAnim extends Component{constructor(){super(...arguments),this.options={}}static get observedAttributes(){return["character","reveal"]}attributeChangedCallback(t,e,r){var i,o;r&&"{"==r[0]||("character"===t&&null!=r&&this.createHanziWriter(r),"reveal"==t&&null!=r&&null==e&&(null===(i=this.hanziWriter)||void 0===i||i.updateDimensions({width:48,height:48}),null===(o=this.hanziWriter)||void 0===o||o.animateCharacter()))}createHanziWriter(t){const e=this.shadowRoot;return this.hanziWriter=ii.create(e,t,{strokeAnimationSpeed:1.2,delayBetweenStrokes:100,showCharacter:!1,showOutline:!1,padding:0,charDataLoader:(t,e)=>{Ji(t).then(e)}}),this.hanziWriter}}CharacterAnim.css=tr`
    `,CharacterAnim.template=Je`
    `;Xe(CharacterAnim);class CharacterMorph extends Component{constructor(){super(),this.animDuration=500,this._charObj=void 0,this.mainSvgGroup=void 0,this.openedList=[],this.animation=void 0,this.characterInterpolator=void 0}set data(t){if(!t||this._charObj===t)return;const e=(t=t.__target).data.strokes;if(!e)return void console.warn("Component has no strokes charObj");this._charObj=t;const r=this.shadowRoot,i=this.renderGroupedStrokes(r,e),o=this.shadowRoot.getElementById("grid");t.gridEl=o,t.svgGroup=i,this.generateGridRec(o,t),this.createSubGroupRec(t),this.updateGroupTransform(t),this.attachGridEventListener(t)}updateGroupTransform(t){const e=this.getHorizontalCharacterCount(t),r=this.shadowRoot.getElementById("grid");r.style.setProperty("--horizontal-len",`${e}`);const i=(r.getBoundingClientRect().width-20-20*(e-1))/Math.max(3,e);r.style.setProperty("--character-width",`${i}px`),t.components.forEach(this._updateGroupTransformRec.bind(this))}_updateGroupTransformRec(t){if(!t.gridEl)throw"No Grid element";if(!t.parent)throw"No parent component";if(!t.parent.gridEl)throw"No parent component gridEl";if(!t.svgGroup)throw"No component svgGroup";const e=this.getHorizontalCharacterCount(t);t.gridEl.style.setProperty("--horizontal-len",`${e}`),setTimeout((()=>{if(!t.gridEl)throw"No Grid element";if(!t.parent)throw"No parent component";if(!t.parent.gridEl)throw"No parent component gridEl";if(!t.svgGroup)throw"No component svgGroup";if(null===t.gridEl.offsetParent||t.opened){t.svgGroup.setAttribute("transform","scale(1, 1) translate(0,0)");for(let e of t.components)this._updateGroupTransformRec(e);return}const e=t.gridEl.getBoundingClientRect(),{x:r,y:i,width:o}=e,{x:s,y:a,width:l}=this.shadowRoot.getElementById("grid").getBoundingClientRect(),c=o/l||1,h=l/o,d=100/(-l+o)*(-r+s-l)-h/(h-1)*100,u=100/(-l+o)*(i-a-l)-100/(h-1)-10;t.svgGroup.setAttribute("transform",`scale(${c}, ${c}) translate(0,0)`),t.svgGroup.setAttribute("transform-origin",`${d}% ${u}%`);for(let e of t.components)this._updateGroupTransformRec(e)}),0)}attachGridEventListener(t){t.gridEl&&t.gridEl.addEventListener("click",this.onClick.bind(this));for(let e of t.components)this.attachGridEventListener(e)}isHorizontalCdl(t){return""!=t&&""!=t}getHorizontalCharacterCount(t){return t.data.cdl&&t.opened?this.isHorizontalCdl(t.data.cdl)?t.components.map(this.getHorizontalCharacterCount.bind(this)).reduce(((t,e)=>t+e),0):Math.max(...t.components.map(this.getHorizontalCharacterCount.bind(this))):1}generateGridRec(t,e){const r=e.data;r.cdl&&t.setAttribute("cdl",r.cdl);for(let i in r.components){const o=r.components[i],s=e.components[i],a=document.createElement("div");if(o.character){a.setAttribute("char",o.character);const t=document.createElement("div");t.classList.toggle("character-content");const e=so(o.pinyin),r=String(no(e)),i=o.definition?ao(o.definition):"";t.innerHTML=`\n          <div class="pinyin" tone="${r}">\n            ${e}\n          </div>\n<div class="description">${i}</div>`,a.appendChild(t)}t.appendChild(a),s.gridEl=a,this.generateGridRec(a,s)}}createSubGroup(t){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t.appendChild(e),e}reassemble(){return i(this,void 0,void 0,(function*(){const t=this.openedList.pop();t&&(this.closeComponent(t),this.updateGroupTransform(this._charObj),this.runMorph(t,!0))}))}closeComponent(t){t.opened=!1,t.gridEl&&t.gridEl.removeAttribute("opened"),t.components.forEach(this.closeComponent.bind(this))}onClick(t){t.stopPropagation();const e=lo(t.target,this._charObj);e&&this.open(e)}getMorphs(t){const e=t.data.len||0,r=[];for(let l=0;l<e;l++){const e=po(t,l);if(!e)continue;const{data:c,idx:h}=e;if(!c.strokes||!c.medians)continue;if(!c.repartition)throw console.warn("No repartition",c.character),new Error("ERR");if(!(t.data.strokes?t.data.strokes[l]:void 0))throw console.warn("No initial path",t.data.character,l),new Error("ERR");if(!t.data.strokes)throw console.warn("No strokes",t.data.character,l),new Error("ERR");if(!t.data.repartition)throw console.warn("No repartition",t.data.character,l),new Error("ERR");const d=(i=t.data.strokes[l],o=t.data.repartition[l],s=c.strokes[h],a=c.repartition[h],[Qi(i,o,s,a),Qi(s,a,i,o)]);r.push(d)}var i,o,s,a;return r}runMorph(t,e=!1){const r=ho(t),i=this.getMorphs(t);i.forEach(((t,i)=>{this.paths[r+i].setAttribute("d",t[e?1:0])})),setTimeout((()=>{i.forEach(((t,i)=>{this.paths[r+i].setAttribute("d",t[e?0:1])}))}),0)}open(t=this._charObj){t.components.length&&(this.openedList.push(t),this.openComponent(t),this.shadowRoot.getElementById("grid").removeAttribute("content-revealed"),this.runMorph(t),this.updateGroupTransform(this._charObj),this.updateGroupTransform(this._charObj),setTimeout((()=>{t.gridEl&&t.gridEl.removeAttribute("animating"),this.shadowRoot.getElementById("grid").setAttribute("content-revealed","")}),this.animDuration))}openComponent(t){t.gridEl?(t.opened=!0,t.gridEl.setAttribute("opened",""),t.components.forEach((t=>{!t.components.length||t.data.pinyin&&t.data.pinyin[0]||this.openComponent(t)}))):console.warn("No grid element for component")}createSubGroupRec(t){if(t.svgGroup)if(t.components.length)for(const e of t.components){const r=this.createSubGroup(t.svgGroup);e.svgGroup=r,this.createSubGroupRec(e)}else{const e=ho(t);this.paths.slice(e,e+(t.data.len||0)).map((e=>{var r;return null===(r=t.svgGroup)||void 0===r?void 0:r.appendChild(e)}))}}renderGroupedStrokes(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","component-svg"),t.appendChild(r);const i=document.createElementNS("http://www.w3.org/2000/svg","g");this.mainSvgGroup=i,r.setAttributeNS(null,"viewBox","0 -124 1024 1024"),r.appendChild(i);const o=[];return e.forEach((t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d",t),i.appendChild(e),o.push(e)})),this.svg=r,this.paths=o,i}}CharacterMorph.css=tr`
    :host([debug]) #grid * {
      background: rgba(255, 255, 0, 0.3);
      border: 1px solid grey;
    }

    :host([debug]) .character-content {
      background: blue !important;
    }

    :host {
      position: relative;
      display: block;
      margin: 10px;
    }

    #component-svg {
      pointer-events: none;
      width: 100%;
      scale: 1 -1;
      transform-origin: 50% 50%;
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    #component-svg path {
      fill: #555;
    }

    #component-svg g {
      transition: transform ${.5}s linear; /*HACK*/
    }

    #grid {
      display: flex;
      width: 100%;
      align-items: center;
      aspect-ratio: 1;
    }

    #grid[opened] {
      aspect-ratio: unset;
      margin-bottom: 20px;
    }
    #grid [cdl]:not([opened]),
    #grid [char]:not([opened]) {
      position: relative;
      flex: 1;
      /*overflow: hidden;*/
      align-items: center;
      box-sizing: border-box;

      display: none;
    margin-bottom: 20px;
    }

    [char][opened] > *:not([opened]),
    [cdl][opened] > *:not([opened]) {
      display: block !important;
      overflow: visible !important;
      flex: 0 !important;
    }

    [opened] {
      display: flex !important;
    }

    #grid [char]::before {
      content: "";
      display: block;
    }


    #grid [char]::before {
      width: var(--character-width);
      height: var(--character-width);
    }

  /*TODO remove max-width HACK*/
    #grid [char] {
      max-width: calc(var(--character-width) * var(--horizontal-len));
    }

    [cdl] {
      flex-direction: row !important;
      flex: none;
justify-content: center;
gap: 20px;
    }

    [cdl=""],
    [cdl=""] {
      flex-direction: column !important;
    }

    .character-content {
      display: block !important;
      width: 100%;

      min-height: unset !important;
      min-width: unset !important;
      opacity: 0;
      text-align: center;
    }

    [char][opened]::before {
      display: none !important;
    }
    #grid[content-revealed] .character-content {
      opacity: 1;
      transition: opacity 0.3s;
    }
    [char][opened] > .character-content {
      display: none !important;
    }

    /*TODO generique*/
    [tone="1"] {
      color: red;
    }
    [tone="2"] {
      color: green;
    }
    [tone="3"] {
      color: blue;
    }
    [tone="4"] {
      color: purple;
    }
    [tone="5"] {
      color: grey;
    }
    .pinyin {
      font-family: roboto;
    }

    .description {
      color: grey;
      max-width: 100%;
      font-size: 14px;
      padding-top: 8px;
      font-family: "Roboto";
    }
path {
transition: 0.5s;
}
    /*
 
 
 
 
 
 
 
 
 
 
 
 
 
 
*/
  `,CharacterMorph.template=Je` <div id="grid"></div> `;Xe(CharacterMorph);let vo=class extends lit_element_s{constructor(){super(...arguments),this.hanzi="",this.backboard=!1,this.showAnimated=!1,this.options={}}isPropBecomingTrue(t,e){if(e.has(t)){const r=e.get(t),i=Reflect.get(this,t);if(!r&&i)return!0}return!1}updated(t){this.isPropBecomingTrue("showAnimated",t)&&this.animateCharacter()}animateCharacter(){var t;if(this.hanziWriter)null===(t=this.hanziWriter)||void 0===t||t.animateCharacter();else{if(!this.hanzi)return void console.warn("hanzi-writer should be given a hanzi attribute when using showAnimated.");this.createHanziWriter(this.hanzi).then((()=>{var t;this.hanziWriter&&(null===(t=this.hanziWriter)||void 0===t||t.animateCharacter())}))}}createHanziWriter(t){return i(this,void 0,void 0,(function*(){yield this.updateComplete;const e=this.renderRoot;this.hanziWriter=ii.create(e,t,Object.assign({showCharacter:!1,showOutline:!1,showHintAfterMisses:1,highlightOnComplete:!1},this.options));const r=new ResizeObserver((t=>{var e;for(const r of t){const t=r.contentRect;null===(e=this.hanziWriter)||void 0===e||e.updateDimensions({width:t.width,height:t.height})}}));return r.observe(this.renderRoot.host),this.hanziWriter}))}static get styles(){return h`
      :host {
        position: relative;
        display: block;
      }

      :host:after {
        content: "";
        display: block;
        padding-bottom: 100%;
      }

      :host > * {
        position: absolute;
        top: 0;
        left: 0;
      }

      #grid-background-target {
        width: 100%;
        height: 100%;
        border: 1px solid #dfdfdf;
      }

      #grid-background-target > line {
        stroke: #f0f0f0;
      }
    `}render(){return lt`
      ${function(t,e,r){return t?e(t):r?.(t)}(this.backboard,(()=>lt`
      <svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target">
        <line x1="0" y1="0" x2="100%" y2="100%" />
        <line x1="100%" y1="0" x2="0" y2="100%" />
        <line x1="50%" y1="0" x2="50%" y2="100%" />
        <line x1="0" y1="50%" x2="100%" y2="50%" />
      </svg>`))}
    `}};r([T({type:String})],vo.prototype,"hanzi",void 0),r([T({type:Boolean})],vo.prototype,"backboard",void 0),r([T({type:Boolean})],vo.prototype,"showAnimated",void 0),r([T({type:Object})],vo.prototype,"options",void 0),vo=r([o("hanzi-writer")],vo);class HanziPinyinSelector extends Component{onActiveTabIndexChange(t){const e=t.target.activeTabIndex;e!==fo.selectedIdx&&(fo.selectedIdx=e)}}HanziPinyinSelector.template=Je`
<md-tabs
id="tabs"
        repeat="hanziData"
        as="char"
@change="this.onActiveTabIndexChange(event)"
        index-as="index"
       .active-tab-index="{selectedIdx}"
>
  <md-primary-tab selected="{!index}">
            <character-anim
              slot="icon"
              character="{char.data.character}"
              reveal="{char.complete}"
            >
            </character-anim>

            <div
              class="pinyin"
              tone="{cleanAndGetPinyinTone(char.data.pinyin)}"
              big="{!char.complete}"
            >
              {cleanPinyin(char.data.pinyin)}
            </div>
</md-primary-tab>
</md-tabs>

  `,HanziPinyinSelector.css=tr`
.pinyin[big] {
  font-size: 28px;
transform: translate(0,-24px);
}
.pinyin {
transition: font-size 0.5s, transform 0.5s;
transform: translate(0,0px);
}
md-tabs {
--md-divider-color: #ffffff00;
--md-primary-tab-icon-size: 48px;
--md-primary-tab-with-icon-and-label-text-container-height: 90px;
--md-primary-tab-container-color: #ffffff00;
--md-divider-thickness: 0px;
}
md-primary-tab {
padding: 0 4px;
}
    [tone="1"] {
      color: red;
    }
    [tone="2"] {
      color: green;
    }
    [tone="3"] {
      color: blue;
    }
    [tone="4"] {
      color: purple;
    }
    [tone="5"] {
      color: grey;
    }
  `;Xe(HanziPinyinSelector);class HanziQuiz extends Component{constructor(){super(...arguments),this.strokesVisible=!1,this.pinyin="",this.nextCharIdx=0,this.description=""}static get observedAttributes(){return["hanzi"]}connectedCallback(){const t=this.shadowRoot.querySelectorAll("md-outlined-button");setTimeout((()=>{for(const e of[...t]){const t=e.shadowRoot.querySelector(".background"),r=e.shadowRoot.querySelector(".outline");t&&r&&(t.style.background="white",r.style.zIndex="1")}}),0)}attributeChangedCallback(t,e,r){"hanzi"===t&&(fo.hanzi=r)}getOcclusedDescription(t,e){return t.replace(new RegExp("["+e+"]","g"),"?")}updateOcclusedDescription(){const t=fo.hanziData.filter((t=>!t.complete)).map((t=>t.data.character));this.shadowRoot.getElementById("description").innerHTML=this.getOcclusedDescription(this.description,t)}get nextCharacter(){const t=this.nextCharIdx;return this.nextCharIdx++,this.hanzi[t]}setData(t){this.description=t.description,this.updateOcclusedDescription()}onVisibilityButtonTapped(t){const e=t.target.selected;fo.rating=Math.min(fo.rating,1),fo.strokesVisible=e}next(){const t=`buttonAnswerEase${fo.rating}`,e=window[t];e&&e()}ratingButtonChange(t){const e=t.target.activeTabIndex;e+1!==fo.rating&&(fo.rating=Math.max(1,Math.min(4,e+1)))}isHintHidden(t,e){return!t&&!e}toggleDecomposition(){fo.currentComponent.opened?this.reassembleCharacter():this.decomposeCharacter()}reassembleCharacter(){const t=this.shadowRoot.getElementById("hanzi-slideshow").shadowRoot.querySelectorAll("character-morph")[fo.selectedIdx];t.reassemble(),t.openedList.length||setTimeout((()=>{fo.currentComponent.opened=!1}),600)}decomposeCharacter(){fo.lastFirstOrderCmp=void 0,fo.currentComponent.opened=!0;this.shadowRoot.getElementById("hanzi-slideshow").shadowRoot.querySelectorAll("character-morph")[fo.selectedIdx].open()}getDecompsitionText(t){return t?"Recompose":"Decompose"}getPlecoLink(t){return`plecoapi://x-callback-url/df?hw=${t}`}}HanziQuiz.template=Je`
    <div id="quiz-area">
      <div id="top-bar">
        <hanzi-pinyin-selector id="char-title"></hanzi-pinyin-selector>
        <div style="flex: 1"></div>

        <md-icon-button href="{this.getPlecoLink(hanzi)}">
          <md-icon>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24"
              viewBox="0 -960 960 960"
              width="24"
            >
              <path
                fill="currentColor"
                d="M160-391h45l23-66h104l24 66h44l-97-258h-46l-97 258Zm81-103 38-107h2l38 107h-78Zm319-70v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-600q-38 0-73 9.5T560-564Zm0 220v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-380q-38 0-73 9t-67 27Zm0-110v-68q33-14 67.5-21t72.5-7q26 0 51 4t49 10v64q-24-9-48.5-13.5T700-490q-38 0-73 9.5T560-454ZM260-320q47 0 91.5 10.5T440-278v-394q-41-24-87-36t-93-12q-36 0-71.5 7T120-692v396q35-12 69.5-18t70.5-6Zm260 42q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 118q-48-38-104-59t-116-21q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q46-24 96-36t102-12q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 102 12t96 36q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-60 0-116 21t-104 59ZM280-499Z"
              />
            </svg>
          </md-icon>
        </md-icon-button>

        <md-icon-button
          toggle
          label="stroke visibility"
          selected="{strokesVisible}"
          @change="this.onVisibilityButtonTapped(event)"
        >
          <md-icon>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              style="width:24px;height:24px"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
              />
            </svg>
          </md-icon>

          <md-icon slot="selected">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              style="width:24px;height:24px"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"
              />
            </svg>
          </md-icon>
        </md-icon-button>

        <md-icon-button @click="restartCurrentQuiz()">
          <md-icon>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              style="width:24px;height:24px"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="M16.24,3.56L21.19,8.5C21.97,9.29 21.97,10.55 21.19,11.34L12,20.53C10.44,22.09 7.91,22.09 6.34,20.53L2.81,17C2.03,16.21 2.03,14.95 2.81,14.16L13.41,3.56C14.2,2.78 15.46,2.78 16.24,3.56M4.22,15.58L7.76,19.11C8.54,19.9 9.8,19.9 10.59,19.11L14.12,15.58L9.17,10.63L4.22,15.58Z"
              />
            </svg>
          </md-icon>
        </md-icon-button>

        <md-icon-button @click="breiflyShowAndRestartQuiz()">
          <md-icon>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24"
              viewBox="0 -960 960 960"
              width="24"
            >
              <path
                fill="currentColor"
                d="M240-80v-172q-57-52-88.5-121.5T120-520q0-150 105-255t255-105q125 0 221.5 73.5T827-615l52 205q5 19-7 34.5T840-360h-80v120q0 33-23.5 56.5T680-160h-80v80h-80v-160h160v-200h108l-38-155q-23-91-98-148t-172-57q-116 0-198 81t-82 197q0 60 24.5 114t69.5 96l26 24v208h-80Zm254-360Zm-14 120q17 0 28.5-11.5T520-360q0-17-11.5-28.5T480-400q-17 0-28.5 11.5T440-360q0 17 11.5 28.5T480-320Zm-30-128h61q0-25 6.5-40.5T544-526q18-20 35-40.5t17-53.5q0-42-32.5-71T483-720q-40 0-72.5 23T365-637l55 23q7-22 24.5-35.5T483-663q22 0 36.5 12t14.5 31q0 21-12.5 37.5T492-549q-20 21-31 42t-11 59Z"
              />
            </svg>
          </md-icon>
        </md-icon-button>
      </div>

      <characters-slideshow-quiz
        id="hanzi-slideshow"
      ></characters-slideshow-quiz>
      <div id="after-buttons">
        <md-outlined-button
          reveal="{currentComponent.complete}"
          @click="restartCurrentQuiz()"
          >Practice</md-outlined-button
        >
        <md-outlined-button
          disabled="{!currentComponent.components.length}"
          reveal="{currentComponent.complete}"
          @click="this.toggleDecomposition()"
          >{this.getDecompsitionText(currentComponent.opened)}</md-outlined-button
        >
        <!--<div style="flex: 1"></div>-->
        <md-filled-button reveal="{complete}" @click="this.next()"
          >Next</md-filled-button
        >
      </div>

      <div id="character-def" hidden="{!currentComponent.complete}">
        {currentComponent.definition}
      </div>
      <div
        id="character-hint"
        hidden="{this.isHintHidden(currentComponent.complete, strokesVisible)}"
      >
        {currentComponent.etymology.hint}
      </div>

     <!-- <div id="revealed-hanzi-wrapper">
        <div
          id="revealed-hanzi"
          repeat="hanziData"
          as="hanziComponent"
          index-as="index"
        >
          <div class="revealed-char" @click="selectCharacterIdx(index)">
            <character-anim
              character="{hanziComponent.character}"
              reveal="{hanziComponent.complete}"
            >
            </character-anim>
            <div
              class="pinyin"
              tone="{getPinyinTone(hanziComponent.pinyin)}"
            >
              {cleanPinyin(hanziComponent.pinyin)}
            </div>
          </div>
        </div>
      </div>
-->
    <div class="first-order-wrapper" hidden="{!lastFirstOrderCmp}">
      <div class="first-order-character">
        <span class="first-order-hanzi">
          {lastFirstOrderCmp.data.character}
        </span>
        <span class="first-order-pinyin"
              tone="{cleanAndGetPinyinTone(lastFirstOrderCmp.data.pinyin)}">
              {cleanPinyin(lastFirstOrderCmp.data.pinyin)}
        </span>
      </div>
        <div class="first-order-definition">
          {cleanDescription(lastFirstOrderCmp.data.definition)}
        </div>
    </div>

    <md-tabs
      id="tab-bar"
      @change="this.ratingButtonChange(event)"
      .active-tab-index="{minusone(rating)}"
    >
      <md-primary-tab>Again</md-primary-tab>
      <md-primary-tab>Hard</md-primary-tab>
      <md-primary-tab>Good</md-primary-tab>
      <md-primary-tab selected>Easy</md-primary-tab>
    </md-tabs>

   </div>

    <span id="description"></span>
  `,HanziQuiz.css=tr`
[hidden] {
display: none !important;
}
.first-order-wrapper {
  display: flex;
  padding: 12px;
}
    .first-order-character {
display: flex;
flex-direction: column;
padding-right: 12px;
}
    .first-order-hanzi {
      font-size: 30px;
}
    .first-order-pinyin {
      font-size: 14px;
color: red;
text-align: center;
}

    .first-order-definition {
      color: grey;
align-self: center;
}
    #quiz-area {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    :host {
      position: relative;
      --quiz-background: #fbfbfb;
      display: flex;
      flex-direction: column;
      --mdc-tab-horizontal-padding: 0px;
      background: var(--quiz-background);
--md-sys-color-surface: white;
    }

    #top-bar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      overflow: hidden;
    }

    #button-easy {
      --mdc-theme-primary: green;
      --mdc-theme-on-primary: white;
    }

    #tab-bar {
      position: fixed;
      bottom: 0;
      width: 100%;
      --mdc-tab-horizontal-padding: 0px;
      background: white;
    }

    #char-title {
      padding-left: 12px;
      margin: 0;
    }

    #hanzi-slideshow {
      max-width: 500px;
    }

    #hanzi-slideshow::before {
      position: absolute;
      content: '';
      padding-top: 100%;
    }

    #hanzi {
      width: 100%;
      padding: 0 12px;
      margin: 0;
      height: 36px;
      box-sizing: border-box;
      font-size: 40px;
      text-align: center;
    }

    .revealed-char {
      display: flex;
      flex-direction: column;
      pointer-events: all;
    }

    #revealed-hanzi-wrapper {
      display: flex;
      flex: 1;
      position: sticky;
      bottom: 48px;
      padding-bottom: 16px;
      pointer-events: none;
    }
    #revealed-hanzi {
      display: flex;
      align-self: end;
      background: rgb(255, 255, 255);
      background: linear-gradient(
        180deg,
        rgba(251, 251, 251, 0) 0%,
        rgba(251, 251, 251, 1) 50%
      );

      justify-content: center;
      flex: 1;
    }

    #revealed-hanzi .pinyin {
      text-align: center;
    }

    #revealed-hanzi > .revealed-char > character-anim {
      width: 60px;
      height: 60px;
    }

    #description {
      padding: 0 12px;
      margin-bottom: 42px;
    }

    md-icon-button a {
      color: initial;
    }

    #after-buttons {

      position: sticky;
bottom: 50px;

      display: flex;
      justify-content: space-around;
      margin: 8px;
      margin-bottom: 24px;
      pointer-events: none;
      gap: 8px;
    }

    #after-buttons > * {
      opacity: 0;
      transition: 0.3s opacity;
    }

    #after-buttons > [reveal] {
      pointer-events: initial;
      opacity: 1;
    }

    #character-hint {
      color: #878787;
      padding: 0 8px;
    }
    #character-def {
      padding: 0 8px;
    }
    #character-def:first-letter {
      text-transform: uppercase;
    }

    [tone="1"] {
      color: red;
    }
    [tone="2"] {
      color: green;
    }
    [tone="3"] {
      color: blue;
    }
    [tone="4"] {
      color: purple;
    }
    [tone="5"] {
      color: grey;
    }
  `;Xe(HanziQuiz)})();
//# sourceMappingURL=main.js.map</script></head><style>#content, body {
    margin: 0;
    font-family: arial;
    font-size: 20px;
    color: black;
    background-color: white;
}</style><hanzi-quiz id="hanziquiz" hanzi="{{Hanzi}}"></hanzi-quiz><script>document.addEventListener('DOMContentLoaded', function() {
    const hanziquiz = document.getElementById('hanziquiz')

    hanziquiz.setData({
        description: `{{Description}}`,
        pinyin: `{{Pinyin}}`
    })
});</script>
